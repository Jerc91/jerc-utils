self.importScripts("/assets/js/workers/requester-tools.js"),self.requester={},function(){function a(a){return"[object Function]"==Object.prototype.toString.call(a)}function b(b){var d=c(...arguments);if(a(b))return d?b(...d):b(d)}function c(){var a,b=arguments.length;if(1<b){a=[];for(var c=1;c<b;c++)a[a.length]=arguments[c]}return a}function d(){const a={},d=this;return d.on=(c,e)=>(a[c]=function(){return b(e,...arguments)},d),d.off=b=>(delete a[b],d),d.trigger=function(b){let d=c(...arguments)||[];return a[b](...d)},d}Object.defineProperty(self,"command",{get:()=>new d})}(),function(){function a(){function a(a){return c=a}return j?Promise.resolve():caches.keys().then(b=>Promise.all(b.map((a,c)=>{if(a!==d)return caches.delete(b[c])})).then(()=>caches.has(d).then(b=>{let c=caches.open(d);return b?c.then(a):c.then(b=>{a(b).addAll(g)})}).then(()=>j=!0))).catch(self.tools.error)}function b(a){return self.clients.matchAll().then(b=>{b.forEach(b=>b.postMessage(`SW Says: '${JSON.stringify(a)}'`))})}let c,d=self.tools.constants.CACHE_VERSION,e=self.tools.constants.HEADER_JR,f=self.tools.constants.FILESTOUPDATE,g=[""],h=self.command.on("request",function(a){return navigator.onLine||a.src!=f?self.tools.getFile(a):Promise.resolve({result:{},path:f,observedId:a.observedId})}).on("filesToUpdate",function(){return navigator.onLine?fetch(f,{headers:{cache:"no-cache"}}).then(a=>a.json()).then(a=>self.tools.constants.FILES_SERVER=a):Promise.resolve(self.tools.constants.FILES_SERVER={})}),i="",j=!1,k=[];k=location.href.split("/"),i=k.splice(0,k.length-1).join("/"),i+="/",self.tools.factoryError(b),this.handlerInstall=function(b){b.waitUntil(a().then(self.skipWaiting).catch(self.tools.error))},this.handlerActive=function(b){b.waitUntil(a().then(()=>self.clients.claim()).catch(self.tools.error))},this.handlerFetch=function(b){if(b.request.headers.has(e))return b.request.headers.remove(e),b.respondWith(fetch(b.request));if(!b.request.url.startsWith(self.location.origin))return b.respondWith(fetch(b.request));let c=a().then(()=>{let a,c=b.request,d=c.url.replace(i,"");return a=d&&!d.includes("#!")&&d.indexOf("?")?d:"index.html",self.tools.getFile({src:a,fromFetch:!0})});return b.respondWith(c)},this.handlerMessage=function(a){let b=a.ports[0];return h.trigger(a.data.command,a.data).then(a=>b.postMessage(a)).catch(a=>b.postMessage(a))},this.sendMessageClients=b}.call(self.requester),self.addEventListener("install",self.requester.handlerInstall),self.addEventListener("activate",self.requester.handlerActive),self.addEventListener("fetch",self.requester.handlerFetch),self.addEventListener("message",self.requester.handlerMessage);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2Utd29ya2VyLmpzIl0sIm5hbWVzIjpbInNlbGYiLCJpbXBvcnRTY3JpcHRzIiwicmVxdWVzdGVyIiwiZm5Jc0Z1bmN0aW9uIiwieCIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImZuRXhlY0Z1bmN0aW9uIiwiY2IiLCJwYXJzIiwiZm5QYXJhbWV0ZXJzV2l0aG91dEZpcnN0IiwiYXJndW1lbnRzIiwic2l6ZSIsImxlbmd0aCIsImkiLCJDb21tYW5kIiwiX2NvbW1hbmRzIiwiX2FwaSIsIm9uIiwiY29tbWFuZCIsImZuQ2FsbGJhY2siLCJvZmYiLCJ0cmlnZ2VyIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJpbml0IiwiYXNzaWduQ2FjaGUiLCJjYWNoZSIsIkNBQ0hFX0NVUlJFTlQiLCJJTklUX1NFUlZJQ0UiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNhY2hlcyIsImtleXMiLCJ0aGVuIiwiYWxsIiwibWFwIiwia2V5IiwiQ0FDSEVfVkVSU0lPTiIsImRlbGV0ZSIsImhhcyIsInJlc3VsdCIsInByb21pc2VDYWNoZSIsIm9wZW4iLCJhZGRBbGwiLCJDQUNIRV9GSUxFUyIsImNhdGNoIiwidG9vbHMiLCJlcnJvciIsInNlbmRNZXNzYWdlQ2xpZW50cyIsIm1lbnNhamUiLCJjbGllbnRzIiwibWF0Y2hBbGwiLCJmb3JFYWNoIiwiY2xpZW50IiwicG9zdE1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc3RhbnRzIiwiSEVBREVSX0pSIiwiRklMRVNUT1VQREFURSIsIkNPTU1BTkQiLCJkYXRvcyIsIm5hdmlnYXRvciIsIm9uTGluZSIsInNyYyIsImdldEZpbGUiLCJwYXRoIiwib2JzZXJ2ZWRJZCIsImZldGNoIiwiaGVhZGVycyIsInJlc3BvbnNlIiwianNvbiIsImZpbGVzIiwiRklMRVNfU0VSVkVSIiwiT1JJR0lOX1BBVEgiLCJwYXRocyIsImxvY2F0aW9uIiwiaHJlZiIsInNwbGl0Iiwic3BsaWNlIiwiam9pbiIsImZhY3RvcnlFcnJvciIsImhhbmRsZXJJbnN0YWxsIiwiZXZlbnQiLCJ3YWl0VW50aWwiLCJza2lwV2FpdGluZyIsImhhbmRsZXJBY3RpdmUiLCJjbGFpbSIsImhhbmRsZXJGZXRjaCIsInJlcXVlc3QiLCJyZW1vdmUiLCJyZXNwb25kV2l0aCIsInVybCIsInN0YXJ0c1dpdGgiLCJvcmlnaW4iLCJ0YXJnZXRVcmwiLCJyZXF1ZXN0VXJsIiwicmVwbGFjZSIsImluY2x1ZGVzIiwiaW5kZXhPZiIsImZyb21GZXRjaCIsImhhbmRsZXJNZXNzYWdlIiwicG9ydCIsInBvcnRzIiwiZGF0YSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQVlBQSxJQUFJLENBQUNDLGFBQUwsQ0FBbUIsdUNBQW5CLEMsQ0FHQUQsSUFBSSxDQUFDRSxTQUFMLENBQWlCLEUsQ0FFaEIsVUFBWSxDQVlaLFFBQVNDLENBQUFBLENBQVQsQ0FBc0JDLENBQXRCLENBQXlCLENBQ3hCLE1BQTRDLG1CQUFyQyxFQUFBQyxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLFFBQWpCLENBQTBCQyxJQUExQixDQUErQkosQ0FBL0IsQ0FDUCxDQWlCRCxRQUFTSyxDQUFBQSxDQUFULENBQXdCQyxDQUF4QixDQUE0QixDQUMzQixHQUFJQyxDQUFBQSxDQUFJLENBQUdDLENBQXdCLENBQUMsR0FBR0MsU0FBSixDQUFuQyxDQUNBLEdBQUdWLENBQVksQ0FBQ08sQ0FBRCxDQUFmLENBQXFCLE1BQU9DLENBQUFBLENBQUksQ0FBR0QsQ0FBRSxDQUFDLEdBQUdDLENBQUosQ0FBTCxDQUFpQkQsQ0FBRSxDQUFDQyxDQUFELENBQ25ELENBT0QsUUFBU0MsQ0FBQUEsQ0FBVCxFQUFvQyxDQUNuQyxHQUFJRCxDQUFBQSxDQUFKLENBQ0NHLENBQUksQ0FBR0QsU0FBUyxDQUFDRSxNQURsQixDQUVBLEdBQVcsQ0FBUCxDQUFBRCxDQUFKLENBQWMsQ0FDYkgsQ0FBSSxDQUFHLEVBRE0sQ0FFYixJQUFJLEdBQUlLLENBQUFBLENBQUMsQ0FBRyxDQUFa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QUFLLENBQUNvQixLQUFOLENBQVksQ0FBWixDQUFYLENBR0EsTUFBTzNDLENBQUFBLENBQU8sQ0FBQ3ZDLE9BQVIsQ0FBZ0I4RCxDQUFLLENBQUNxQixJQUFOLENBQVd0RixPQUEzQixDQUFvQ2lFLENBQUssQ0FBQ3FCLElBQTFDLEVBQ0x2RSxJQURLLENBQ0E0QixDQUFLLEVBQUl5QyxDQUFJLENBQUNoRCxXQUFMLENBQWlCTyxDQUFqQixDQURULEVBRUxoQixLQUZLLENBRUNFLENBQUssRUFBSXVELENBQUksQ0FBQ2hELFdBQUwsQ0FBaUJQLENBQWpCLENBRlYsQ0FHUCxDQXRIVyxDQStKWixLQUFLQyxrQkFBTCxDQUEwQkEsQ0FFMUIsQ0FqS0QsQ0FpS0czQyxJQWpLSCxDQWlLUVIsSUFBSSxDQUFDRSxTQWpLYixDLENBb0tBRixJQUFJLENBQUM0RyxnQkFBTCxDQUFzQixTQUF0QixDQUFpQzVHLElBQUksQ0FBQ0UsU0FBTCxDQUFlbUYsY0FBaEQsQyxDQUNBckYsSUFBSSxDQUFDNEcsZ0JBQUwsQ0FBc0IsVUFBdEIsQ0FBa0M1RyxJQUFJLENBQUNFLFNBQUwsQ0FBZXVGLGFBQWpELEMsQ0FDQXpGLElBQUksQ0FBQzRHLGdCQUFMLENBQXNCLE9BQXRCLENBQStCNUcsSUFBSSxDQUFDRSxTQUFMLENBQWV5RixZQUE5QyxDLENBQ0EzRixJQUFJLENBQUM0RyxnQkFBTCxDQUFzQixTQUF0QixDQUFpQzVHLElBQUksQ0FBQ0UsU0FBTCxDQUFlc0csY0FBaEQsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRPRE86XHJcbi8vIFBldGljaW9uZXMgaW52YWxpZGEgb25saW5lXHJcbi8vIFZhbGlkYXIgY2F0Y2ggY29uIGZhbGxhcyBlbiBjYWRhIHByb21pc2VcclxuLy8gVmFsaWRhciBwZXJmb3JtYW5jZSBkZSBsYSBhcGxpY2FjacOzbiBjb24gdW4gYXJjaGl2byBncmFuZGVcclxuLy8gVmFsaWRhciBzaSBzZSByZXF1aWVyZSB1c2FyIGZuSGFuZGxlTWVzc2FnZXNFcnJvciwgcGFyYSB1dGlsaXphciBjb24gZWwgcGF0csOzbiBjb21tYW5kXHJcbi8vIFNlIGRlYmUgdmVyaWZpY2FyIGVsIHVzbyBkZSBzdHJlYW1uaW5nXHJcbi8vIFxyXG4vLyBSZXZpc2FyIGRlIG51ZXZvIGxvcyBzZXJ2aWNlIHdvcmtlclxyXG4vLyB2ZXIgbG8gZGVsIGNvbnRyb2xsZXIgdXNhciBudWV2b3MgZXZlbnRvc1xyXG4vLyB2ZXIgc2kgZXMgbWVqb3IgdXNhciBza2lwV2FpdGluZ1xyXG4vLyBcclxuXHJcbnNlbGYuaW1wb3J0U2NyaXB0cygnL2Fzc2V0cy9qcy93b3JrZXJzL3JlcXVlc3Rlci10b29scy5qcycpO1xyXG5cclxuLy8gVmFyYWJsZXMgZGVsIG3Ds2R1bG9cclxuc2VsZi5yZXF1ZXN0ZXIgPSB7fTtcclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBWYWxpZGEgc2kgZWwgcGFyYW1ldHJvIGVzIHVuYSB0aXBvIGRlIG9iamV0byBmdW5jdGlvblxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFBhcsOhbWV0cm9zOlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIEB4OiAge29iamVjdH0gVmFsb3IgYSB2YWxpZGFyXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUmV0b3JuYTogU2kgZWwgcGFyw6FtZXRybyB4IGVzIHVuYSBmdW5jacOzbiBvIG5vXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZm5Jc0Z1bmN0aW9uKHgpIHtcclxuXHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcclxuXHR9IC8vIGVuZCBmdW5jdGlvblxyXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBWYWxpZGEgc2kgZWwgcGFyYW1ldHJvIGVzIHVuYSBmdW5jacOzbiB5IGxhIGVqZWN1Y2EgcGFzYW5kb2xlIGxvcyBwYXLDoW1ldHJvcyBxdWUgc2UgaW5kaXF1ZW5cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBQYXLDoW1ldHJvczpcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBAY2I6ICAgICB7ZnVuY3Rpb259ICBGdW5jacOzbiBhIGVqZWN1dGFyXHJcblx0XHQvLyBAYXJnMTogICB7YW55fSAgICAgICBQYXLDoW1ldHJvIGEgZWplY3V0YXJcclxuXHRcdC8vIEBhcmcyOiAgIHthbnl9ICAgICAgIFBhcsOhbWV0cm8gYSBlamVjdXRhclxyXG5cdFx0Ly8gQGFyZy4uLjoge2FueX0gICAgICAgUGFyw6FtZXRybyBhIGVqZWN1dGFyXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUmV0b3JuYTogRWwgcmVzdWx0YWRvIGRlIGxhIGZ1bmNpw7NuXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZm5FeGVjRnVuY3Rpb24oY2IpIHtcclxuXHRcdHZhciBwYXJzID0gZm5QYXJhbWV0ZXJzV2l0aG91dEZpcnN0KC4uLmFyZ3VtZW50cyk7XHJcblx0XHRpZihmbklzRnVuY3Rpb24oY2IpKSByZXR1cm4gcGFycyA/IGNiKC4uLnBhcnMpIDogY2IocGFycyk7XHJcblx0fSAvLyBlbmQgZm5FeGVjRnVuY3Rpb25cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBPYnRpZW5lIGxvcyBwYXJhbWV0cm9zIGV4Y2VwdG8gZWwgcHJpbWVybyB5IHJldG9ybmEgdW4gYXJyYXlcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBmblBhcmFtZXRlcnNXaXRob3V0Rmlyc3QoKSB7XHJcblx0XHR2YXIgcGFycyxcclxuXHRcdFx0c2l6ZSA9IGFyZ3VtZW50cy5sZW5ndGg7XHJcblx0XHRpZiAoc2l6ZSA+IDEpIHtcclxuXHRcdFx0cGFycyA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSBwYXJzW3BhcnMubGVuZ3RoXSA9IGFyZ3VtZW50c1tpXTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBwYXJzO1xyXG5cdH1cclxuXHJcblx0Ly8gQ29uc3RydWN0b3IgcXVpZW4gYWRtaW5pc3RyYSBsb3Mgb2JzZXJ2YWRvc1xyXG5cdGZ1bmN0aW9uIENvbW1hbmQoKSB7XHJcblx0XHRjb25zdCBfY29tbWFuZHMgPSB7fSxcclxuXHRcdFx0X2FwaSA9IHRoaXM7XHJcblxyXG5cdFx0X2FwaS5vbiA9IChjb21tYW5kLCBmbkNhbGxiYWNrKSA9PiB7XHJcblx0XHRcdF9jb21tYW5kc1tjb21tYW5kXSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRyZXR1cm4gZm5FeGVjRnVuY3Rpb24oZm5DYWxsYmFjaywgLi4uYXJndW1lbnRzKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0cmV0dXJuIF9hcGk7XHJcblx0XHR9XHJcblxyXG5cdFx0X2FwaS5vZmYgPSAoY29tbWFuZCkgPT4ge1xyXG5cdFx0XHRkZWxldGUgX2NvbW1hbmRzW2NvbW1hbmRdO1xyXG5cdFx0XHRyZXR1cm4gX2FwaTtcclxuXHRcdH1cclxuXHRcdF9hcGkudHJpZ2dlciA9IGZ1bmN0aW9uIChjb21tYW5kKSB7XHJcblx0XHRcdGxldCBwYXJzID0gZm5QYXJhbWV0ZXJzV2l0aG91dEZpcnN0KC4uLmFyZ3VtZW50cykgfHwgW107XHJcblx0XHRcdHJldHVybiBfY29tbWFuZHNbY29tbWFuZF0oLi4ucGFycyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIF9hcGk7XHJcblx0fVxyXG5cclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgJ2NvbW1hbmQnLCB7IGdldDogKCkgPT4gbmV3IENvbW1hbmQoKSB9KTtcclxufSkoKTtcclxuXHJcbi8vIERlZmluaWNpw7NuIGRlbCBtw7NkdWxvXHJcbihmdW5jdGlvbiAoKSB7XHJcblx0Ly8gVmFyaWFibGVzIHByaXZhZGFzXHJcblx0bGV0IENBQ0hFX1ZFUlNJT04gPSBzZWxmLnRvb2xzLmNvbnN0YW50cy5DQUNIRV9WRVJTSU9OLFxyXG5cdFx0SEVBREVSX0pSID0gc2VsZi50b29scy5jb25zdGFudHMuSEVBREVSX0pSLFxyXG5cdFx0RklMRVNUT1VQREFURSA9IHNlbGYudG9vbHMuY29uc3RhbnRzLkZJTEVTVE9VUERBVEUsXHJcblx0XHRDQUNIRV9GSUxFUyA9IFtcIlwiXSxcclxuXHRcdENPTU1BTkQgPSBzZWxmLmNvbW1hbmRcclxuXHRcdFx0Lm9uKCdyZXF1ZXN0Jywgc2VuZFJlcXVlc3QpXHJcblx0XHRcdC5vbignZmlsZXNUb1VwZGF0ZScsIHVwZGF0ZUZpbGVzVG9VcGRhdGUpO1xyXG5cclxuXHRsZXRcdENBQ0hFX0NVUlJFTlQsXHJcblx0XHRPUklHSU5fUEFUSCA9ICcnLFxyXG5cdFx0SU5JVF9TRVJWSUNFID0gZmFsc2UsXHJcblx0XHRwYXRocyA9IFtdO1xyXG5cclxuXHQvLyBJbmljaW8gU2VydmljZSBXb3JrZXJcclxuXHRwYXRocyA9IGxvY2F0aW9uLmhyZWYuc3BsaXQoJy8nKTtcclxuXHRPUklHSU5fUEFUSCA9IHBhdGhzLnNwbGljZSgwLCBwYXRocy5sZW5ndGggLSAxKS5qb2luKCcvJyk7XHJcblx0T1JJR0lOX1BBVEggKz0gJy8nO1xyXG5cdFxyXG5cdC8vIEVycm9yZXMgICAgXHJcblx0c2VsZi50b29scy5mYWN0b3J5RXJyb3Ioc2VuZE1lc3NhZ2VDbGllbnRzKTtcclxuXHJcblx0LyoqXHJcblx0ICogRnVuY2nDs24gcGFyYSBvYnRlbmVyIGxvcyBhcmNoaXZvcyBlc3RhdGljb3NcclxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPENhY2hlPn0gT2J0aWVuZSBlbCBjYWNoZSBzdG9yYWdlXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaW5pdCgpIHtcclxuXHRcdGlmIChJTklUX1NFUlZJQ0UpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuXHRcdHJldHVybiBjYWNoZXMua2V5cygpLnRoZW4oa2V5cyA9PiB7XHJcblx0XHRcdHJldHVybiBQcm9taXNlLmFsbChrZXlzLm1hcCgoa2V5LCBpKSA9PiB7XHJcblx0XHRcdFx0aWYgKGtleSAhPT0gQ0FDSEVfVkVSU0lPTikgcmV0dXJuIGNhY2hlcy5kZWxldGUoa2V5c1tpXSk7XHJcblx0XHRcdH0pKVxyXG5cdFx0XHQudGhlbigoKSA9PiBjYWNoZXMuaGFzKENBQ0hFX1ZFUlNJT04pLnRoZW4ocmVzdWx0ID0+IHtcclxuXHRcdFx0XHRsZXQgcHJvbWlzZUNhY2hlID0gY2FjaGVzLm9wZW4oQ0FDSEVfVkVSU0lPTik7XHJcblx0XHRcdFx0cmV0dXJuIHJlc3VsdCA/IHByb21pc2VDYWNoZS50aGVuKGFzc2lnbkNhY2hlKSA6IHByb21pc2VDYWNoZS50aGVuKGNhY2hlID0+IHtcclxuXHRcdFx0XHRcdGFzc2lnbkNhY2hlKGNhY2hlKS5hZGRBbGwoQ0FDSEVfRklMRVMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQudGhlbigoKSA9PiBJTklUX1NFUlZJQ0UgPSB0cnVlKSk7XHJcblx0XHR9KS5jYXRjaChzZWxmLnRvb2xzLmVycm9yKTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEZ1bmNpw7NuIGRlIHJlY3Vyc2l2aWRhZFxyXG5cdFx0ICogQHBhcmFtICB7Q2FjaGVTdG9yYWdlfSBjYWNoZSBhY3R1YWwgY2FjaGVcclxuXHRcdCAqIEByZXR1cm4ge0NhY2hlU3RvcmFnZX0gICAgICAgYWN0dWFsIGNhY2hlXHJcblx0XHQgKi9cclxuXHRcdGZ1bmN0aW9uIGFzc2lnbkNhY2hlKGNhY2hlKSB7XHJcblx0XHRcdHJldHVybiBDQUNIRV9DVVJSRU5UID0gY2FjaGU7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVbmEgdmV6IHNlIGluc3RhbGEgZWwgc2VydmljZSB3b3JrZXIsIGVsaW1pbmEgZWwgY2FjaGUgeSBzZSBkZXNjYXJnYSBsb3MgYXJjaGl2b3MgaW5pY2lhbGVzIHNpIGVsIGNhY2VoIGFjdHVhbCBubyBlc3RhIGRlZmluaWRvXHJcblx0ICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IGV2ZW50byBpbnN0YWxhciBkZWwgc2VydmljZSB3b3JrZXJcclxuXHQgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICBTZSByZXN1ZWx2ZSBhbCBpbmljaWFyIGVsIGNhY2hlIGFjdHVhbFxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGhhbmRsZXJJbnN0YWxsKGV2ZW50KSB7XHJcblx0XHQvLyBFc3BlcmEgYSBxdWUgc2Ugb2J0ZW5nYW4gbG9zIGFyY2hpdm9zIGluaWNpYWxlcyBkZSBjYWNoZVxyXG5cdFx0ZXZlbnQud2FpdFVudGlsKGluaXQoKS50aGVuKHNlbGYuc2tpcFdhaXRpbmcpLmNhdGNoKHNlbGYudG9vbHMuZXJyb3IpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVuYSB2ZXogc2UgYWN0aXZlIGVsIHNlcnZpY2Ugd29ya2VyLCBlbGltaW5hIGVsIGNhY2hlIHkgc2UgZGVzY2FyZ2EgbG9zIGFyY2hpdm9zIGluaWNpYWxlcyBzaSBlbCBjYWNlaCBhY3R1YWwgbm8gZXN0YSBkZWZpbmlkb1xyXG5cdCAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBldmVudG8gYWN0aXZhciBkZWwgc2VydmljZSB3b3JrZXJcclxuXHQgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICBTZSByZXN1ZWx2ZSBhbCBpbmljaWFyIGVsIGNhY2hlIGFjdHVhbFxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGhhbmRsZXJBY3RpdmUoZXZlbnQpIHtcclxuXHRcdC8vIEVzcGVyYSBhIHF1ZSBzZSBlbGltaW5lIGxhIGNhY2hlXHJcblx0XHRldmVudC53YWl0VW50aWwoaW5pdCgpLnRoZW4oKCkgPT4gc2VsZi5jbGllbnRzLmNsYWltKCkpLmNhdGNoKHNlbGYudG9vbHMuZXJyb3IpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbHRyYSB0b2RhcyBsYXMgcGV0aWNpb25lcyBoYWNpYSBlbCBzZXJ2aWRvciwgeSBkZWNpZGUgc2kgZW52aWFyIGxhIHBldGljacOzbiBhbCBzZXJpdmlkb3IgbyB1c2FyIHVuYSB2ZXJzacOzbiBsb2NhbCBkZSBsYSByZXNwdWVzdGEuXHJcblx0ICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IGV2ZW50byBmZXRjaCBkZWwgc2VydmljZSB3b3JrZXJcclxuXHQgKiBAcmV0dXJuIHtQcm9tZXNhfSAgICAgICBFc3BlcmEgbWllbnRyYXMgc2UgcmVzdWVsdmUgYSBkb25kZSByZWFsaXphciBsYSBwZXRpY2nDs25cclxuXHQgKi9cclxuXHRmdW5jdGlvbiBoYW5kbGVyRmV0Y2goZXZlbnQpIHtcclxuXHRcdC8vIFBldGljaW9uZXMgcmVhbGl6YWRhcyBkZXNkZSB3b3JrZXIgbyBwYXJhIHNhbHRhcnNlIGVsIGNhY2hlU3RvcmFnZVxyXG5cdFx0aWYoZXZlbnQucmVxdWVzdC5oZWFkZXJzLmhhcyhIRUFERVJfSlIpKSB7XHJcblx0XHRcdGV2ZW50LnJlcXVlc3QuaGVhZGVycy5yZW1vdmUoSEVBREVSX0pSKTtcclxuXHRcdFx0cmV0dXJuIGV2ZW50LnJlc3BvbmRXaXRoKGZldGNoKGV2ZW50LnJlcXVlc3QpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZighZXZlbnQucmVxdWVzdC51cmwuc3RhcnRzV2l0aChzZWxmLmxvY2F0aW9uLm9yaWdpbikpIHtcclxuXHRcdFx0cmV0dXJuIGV2ZW50LnJlc3BvbmRXaXRoKGZldGNoKGV2ZW50LnJlcXVlc3QpKTtcclxuXHRcdH0gXHJcblxyXG5cdFx0bGV0IHByb21pc2VDYWNoZSA9IGluaXQoKS50aGVuKCgpID0+IHtcclxuXHRcdFx0bGV0IE9GRkxJTkVVUkwgPSAnaW5kZXguaHRtbCcsXHJcblx0XHRcdFx0SEFTSFRBRyA9ICcjIScsXHJcblx0XHRcdFx0cmVxdWVzdCA9IGV2ZW50LnJlcXVlc3QsXHJcblx0XHRcdFx0cmVxdWVzdFVybCA9IHJlcXVlc3QudXJsLnJlcGxhY2UoT1JJR0lOX1BBVEgsICcnKSxcclxuXHRcdFx0XHR0YXJnZXRVcmwsXHJcblx0XHRcdFx0b3B0aW9ucyxcclxuXHRcdFx0XHRjb3JzO1xyXG5cclxuXHRcdFx0dGFyZ2V0VXJsID0gKCFyZXF1ZXN0VXJsIHx8IHJlcXVlc3RVcmwuaW5jbHVkZXMoSEFTSFRBRykgfHwgIXJlcXVlc3RVcmwuaW5kZXhPZignPycpKSA/IE9GRkxJTkVVUkwgOiByZXF1ZXN0VXJsO1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHNlbGYudG9vbHMuZ2V0RmlsZSh7IHNyYzogdGFyZ2V0VXJsLCBmcm9tRmV0Y2g6IHRydWUgfSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZWFsaXphIGxhIHBldGljacOzbiBhbCBjYWNoZVN0b3JhZ2UgbyBhbCBzZXJ2aWRvclxyXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3BvbmRXaXRoKHByb21pc2VDYWNoZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVc2EgZWwgcGF0csOzbiBjb21tYW5kIHBhcmEgcmVjaWJpciB5IGVudmlhciBpbmZvcm1hY2nDs24sIHNlIHVzYSBwYXJhIHBldGljaW9uZXMgcGVyc29uYWxpemFkYXNcclxuXHQgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgZXZlbnRvIG1lc3NhZ2UgZGVsIHNlcnZpY2Ugd29ya2VyXHJcblx0ICogQHJldHVybiB7UHJvbWlzZX0gICAgICAgc2UgcmVzdWVsdmUgdW5hIHZleiBzZSBvYnRlbmdhIGxhIGluZm9ybWFjacOzbiBkZSBsYSBwZXRpY2nDs25cclxuXHQgKi9cclxuXHRmdW5jdGlvbiBoYW5kbGVyTWVzc2FnZShldmVudCkge1xyXG5cdFx0bGV0IHBvcnQgPSBldmVudC5wb3J0c1swXTtcclxuXHRcdFxyXG5cdFx0Ly8gU2Ugb2J0aWVuZSBsYSByZXNwdWVzdGEgeSBlc3RhIGVzIGVudmlhZGEgYWwgc2Vydmlkb3JcclxuXHRcdHJldHVybiBDT01NQU5ELnRyaWdnZXIoZXZlbnQuZGF0YS5jb21tYW5kLCBldmVudC5kYXRhKVxyXG5cdFx0XHQudGhlbihkYXRvcyA9PiBwb3J0LnBvc3RNZXNzYWdlKGRhdG9zKSlcclxuXHRcdFx0LmNhdGNoKGVycm9yID0+IHBvcnQucG9zdE1lc3NhZ2UoZXJyb3IpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlIGVudmlhIGEgbG9zIGNsaWVudGVzIGVsIG1lbnNhamUgcXVlIHNlIHBhc2EgY29tbyBww6FyYW1ldHJvXHJcblx0ICogQHBhcmFtICB7T2JqZWN0fSBtZW5zYWplIGluZm9ybWFjacOzbiBxdWUgc2UgcXVpZXJlIHRyYW5zbWl0aXIgYWwgdXN1YXJpb1xyXG5cdCAqIEByZXR1cm4ge1Byb21pc2V9ICAgICBTZSByZXN1ZWx2ZSB1bmEgdmV6IHNlIGVudmlhIGVsIG1lbnNhamUgYSB0b2RvcyBsb3MgY2xpZW50ZXMgc29saWNpdGFkb3NcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBzZW5kTWVzc2FnZUNsaWVudHMobWVuc2FqZSkge1xyXG5cdFx0cmV0dXJuIHNlbGYuY2xpZW50cy5tYXRjaEFsbCgpLnRoZW4oY2xpZW50cyA9PiB7XHJcblx0XHRcdGNsaWVudHMuZm9yRWFjaChjbGllbnQgPT4gY2xpZW50LnBvc3RNZXNzYWdlKGBTVyBTYXlzOiAnJHtKU09OLnN0cmluZ2lmeShtZW5zYWplKX0nYCkpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPYnRpZW5lIGxhIHJlc3B1ZXN0YSBkZSB1bmEgcGV0aWNpw7NuIHNlYSBndWFyZGFkYSBvIGVuIGzDrW5lYVxyXG5cdCAqIEBwYXJhbSAge29iamVjdH0gZGF0b3MgaW5mb3JtYWNpw7NuIGRlIGxhIHBldGljacOzblxyXG5cdCAqIEByZXR1cm4ge1Byb21pc2U8b2JqZWN0Pn0gICAgICAgU2UgcmVzdWVsdmUgYWwgb2J0ZW5lciBsYSByZXNwdWVzdGEuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gc2VuZFJlcXVlc3QoZGF0b3MpIHtcclxuXHRcdGlmICghbmF2aWdhdG9yLm9uTGluZSAmJiBkYXRvcy5zcmMgPT0gRklMRVNUT1VQREFURSkge1xyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgcmVzdWx0OiB7fSwgcGF0aDogRklMRVNUT1VQREFURSwgb2JzZXJ2ZWRJZDogZGF0b3Mub2JzZXJ2ZWRJZCB9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gc2VsZi50b29scy5nZXRGaWxlKGRhdG9zKTtcclxuXHR9XHJcblxyXG5cclxuXHRmdW5jdGlvbiB1cGRhdGVGaWxlc1RvVXBkYXRlKCkge1xyXG5cdFx0aWYoIW5hdmlnYXRvci5vbkxpbmUpIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2VsZi50b29scy5jb25zdGFudHMuRklMRVNfU0VSVkVSID0ge30pO1xyXG5cclxuXHRcdHJldHVybiBmZXRjaChGSUxFU1RPVVBEQVRFLCB7IGhlYWRlcnM6IHsgY2FjaGU6ICduby1jYWNoZScgfSB9KVxyXG5cdFx0XHQudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcblx0XHRcdC50aGVuKGZpbGVzID0+IHNlbGYudG9vbHMuY29uc3RhbnRzLkZJTEVTX1NFUlZFUiA9IGZpbGVzKTtcclxuXHR9XHJcblxyXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ly8gUHVibGljIEFQSVxyXG5cdHRoaXMuaGFuZGxlckluc3RhbGwgPSBoYW5kbGVySW5zdGFsbDtcclxuXHR0aGlzLmhhbmRsZXJBY3RpdmUgPSBoYW5kbGVyQWN0aXZlO1xyXG5cdHRoaXMuaGFuZGxlckZldGNoID0gaGFuZGxlckZldGNoO1xyXG5cdHRoaXMuaGFuZGxlck1lc3NhZ2UgPSBoYW5kbGVyTWVzc2FnZTtcclxuXHR0aGlzLnNlbmRNZXNzYWdlQ2xpZW50cyA9IHNlbmRNZXNzYWdlQ2xpZW50cztcclxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG59KS5jYWxsKHNlbGYucmVxdWVzdGVyKTtcclxuXHJcbi8vIEFzaWduYWNpw7NuIGRlIGV2ZW50b3Ncclxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgc2VsZi5yZXF1ZXN0ZXIuaGFuZGxlckluc3RhbGwpO1xyXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2FjdGl2YXRlJywgc2VsZi5yZXF1ZXN0ZXIuaGFuZGxlckFjdGl2ZSk7XHJcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBzZWxmLnJlcXVlc3Rlci5oYW5kbGVyRmV0Y2gpO1xyXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBzZWxmLnJlcXVlc3Rlci5oYW5kbGVyTWVzc2FnZSk7Il0sImZpbGUiOiJzZXJ2aWNlLXdvcmtlci5qcyJ9
