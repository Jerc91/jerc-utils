self.importScripts("/assets/js/workers/requester-tools.js"),self.requester={},function(){function a(a){return"[object Function]"==Object.prototype.toString.call(a)}function b(b){var d=c(...arguments);if(a(b))return d?b(...d):b(d)}function c(){var a,b=arguments.length;if(1<b){a=[];for(var c=1;c<b;c++)a[a.length]=arguments[c]}return a}function d(){const a={},d=this;return d.on=(c,e)=>(a[c]=function(){return b(e,...arguments)},d),d.off=b=>(delete a[b],d),d.trigger=function(b){let d=c(...arguments)||[];return a[b](...d)},d}Object.defineProperty(self,"command",{get:()=>new d})}(),function(){function a(){function a(a){return c=a}return j?Promise.resolve():caches.keys().then(b=>Promise.all(b.map((a,c)=>{if(a!==d)return caches.delete(b[c])})).then(()=>caches.has(d).then(b=>{let c=caches.open(d);return b?c.then(a):c.then(b=>{a(b).addAll(g)})}).then(()=>j=!0))).catch(self.tools.error)}function b(a){return self.clients.matchAll().then(b=>{b.forEach(b=>b.postMessage(`SW Says: '${JSON.stringify(a)}'`))})}let c,d=self.tools.constants.CACHE_VERSION,e=self.tools.constants.HEADER_JR,f=self.tools.constants.FILESTOUPDATE,g=[""],h=self.command.on("request",function(a){return navigator.onLine||a.src!=f?self.tools.getFile(a):Promise.resolve({result:{},path:f,observedId:a.observedId})}).on("filesToUpdate",function(){return navigator.onLine?fetch(f,{headers:{cache:"no-cache"}}).then(a=>a.json()).then(a=>self.tools.constants.FILES_SERVER=a):Promise.resolve(self.tools.constants.FILES_SERVER={})}),i="",j=!1,k=[];k=location.href.split("/"),i=k.splice(0,k.length-1).join("/"),i+="/",self.tools.factoryError(b),this.handlerInstall=function(b){b.waitUntil(a().then(self.skipWaiting).catch(self.tools.error))},this.handlerActive=function(b){b.waitUntil(a().then(()=>self.clients.claim()).catch(self.tools.error))},this.handlerFetch=function(b){if(b.request.headers.has(e))return b.request.headers.remove(e),b.respondWith(fetch(b.request));if(!b.request.url.startsWith(self.location.origin))return b.respondWith(fetch(b.request));let c=a().then(()=>{let a,c,d=b.request,e=d.url.replace(i,"");return a=e&&!e.includes("#!")&&e.indexOf("?")?e:"index.html",self.tools.getFile({src:a,fromFetch:!0})});return b.respondWith(c)},this.handlerMessage=function(a){let b=a.ports[0];return h.trigger(a.data.command,a.data).then(a=>b.postMessage(a)).catch(a=>b.postMessage(a))},this.sendMessageClients=b}.call(self.requester),self.addEventListener("install",self.requester.handlerInstall),self.addEventListener("activate",self.requester.handlerActive),self.addEventListener("fetch",self.requester.handlerFetch),self.addEventListener("message",self.requester.handlerMessage);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2Utd29ya2VyLmpzIl0sIm5hbWVzIjpbInNlbGYiLCJpbXBvcnRTY3JpcHRzIiwicmVxdWVzdGVyIiwiZm5Jc0Z1bmN0aW9uIiwieCIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImZuRXhlY0Z1bmN0aW9uIiwiY2IiLCJwYXJzIiwiZm5QYXJhbWV0ZXJzV2l0aG91dEZpcnN0IiwiYXJndW1lbnRzIiwic2l6ZSIsImxlbmd0aCIsImkiLCJDb21tYW5kIiwiX2NvbW1hbmRzIiwiX2FwaSIsIm9uIiwiY29tbWFuZCIsImZuQ2FsbGJhY2siLCJvZmYiLCJ0cmlnZ2VyIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJpbml0IiwiYXNzaWduQ2FjaGUiLCJjYWNoZSIsIkNBQ0hFX0NVUlJFTlQiLCJJTklUX1NFUlZJQ0UiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNhY2hlcyIsImtleXMiLCJ0aGVuIiwiYWxsIiwibWFwIiwia2V5IiwiQ0FDSEVfVkVSU0lPTiIsImRlbGV0ZSIsImhhcyIsInJlc3VsdCIsInByb21pc2VDYWNoZSIsIm9wZW4iLCJhZGRBbGwiLCJDQUNIRV9GSUxFUyIsImNhdGNoIiwidG9vbHMiLCJlcnJvciIsInNlbmRNZXNzYWdlQ2xpZW50cyIsIm1lbnNhamUiLCJjbGllbnRzIiwibWF0Y2hBbGwiLCJmb3JFYWNoIiwiY2xpZW50IiwicG9zdE1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc3RhbnRzIiwiSEVBREVSX0pSIiwiRklMRVNUT1VQREFURSIsIkNPTU1BTkQiLCJkYXRvcyIsIm5hdmlnYXRvciIsIm9uTGluZSIsInNyYyIsImdldEZpbGUiLCJwYXRoIiwib2JzZXJ2ZWRJZCIsImZldGNoIiwiaGVhZGVycyIsInJlc3BvbnNlIiwianNvbiIsImZpbGVzIiwiRklMRVNfU0VSVkVSIiwiT1JJR0lOX1BBVEgiLCJwYXRocyIsImxvY2F0aW9uIiwiaHJlZiIsInNwbGl0Iiwic3BsaWNlIiwiam9pbiIsImZhY3RvcnlFcnJvciIsImhhbmRsZXJJbnN0YWxsIiwiZXZlbnQiLCJ3YWl0VW50aWwiLCJza2lwV2FpdGluZyIsImhhbmRsZXJBY3RpdmUiLCJjbGFpbSIsImhhbmRsZXJGZXRjaCIsInJlcXVlc3QiLCJyZW1vdmUiLCJyZXNwb25kV2l0aCIsInVybCIsInN0YXJ0c1dpdGgiLCJvcmlnaW4iLCJ0YXJnZXRVcmwiLCJvcHRpb25zIiwicmVxdWVzdFVybCIsInJlcGxhY2UiLCJpbmNsdWRlcyIsImluZGV4T2YiLCJmcm9tRmV0Y2giLCJoYW5kbGVyTWVzc2FnZSIsInBvcnQiLCJwb3J0cyIsImRhdGEiLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiQUFZQUEsSUFBSSxDQUFDQyxhQUFMLENBQW1CLHVDQUFuQixDLENBR0FELElBQUksQ0FBQ0UsU0FBTCxDQUFpQixFLENBRWhCLFVBQVksQ0FZWixRQUFTQyxDQUFBQSxDQUFULENBQXNCQyxDQUF0QixDQUF5QixDQUN4QixNQUE0QyxtQkFBckMsRUFBQUMsTUFBTSxDQUFDQyxTQUFQLENBQWlCQyxRQUFqQixDQUEwQkMsSUFBMUIsQ0FBK0JKLENBQS9CLENBQ1AsQ0FpQkQsUUFBU0ssQ0FBQUEsQ0FBVCxDQUF3QkMsQ0FBeEIsQ0FBNEIsQ0FDM0IsR0FBSUMsQ0FBQUEsQ0FBSSxDQUFHQyxDQUF3QixDQUFDLEdBQUdDLFNBQUosQ0FBbkMsQ0FDQSxHQUFHVixDQUFZLENBQUNPLENBQUQsQ0FBZixDQUFxQixNQUFPQyxDQUFBQSxDQUFJLENBQUdELENBQUUsQ0FBQyxHQUFHQyxDQUFKLENBQUwsQ0FBaUJELENBQUUsQ0FBQ0MsQ0FBRCxDQUNuRCxDQU9ELFFBQVNDLENBQUFBLENBQVQsRUFBb0MsQ0FDbkMsR0FBSUQsQ0FBQUEsQ0FBSixDQUNDRyxDQUFJLENBQUdELFNBQVMsQ0FBQ0UsTUFEbEIsQ0FFQSxHQUFXLENBQVAsQ0FBQUQsQ0FBSixDQUFjLENBQ2JILENBQUksQ0FBRyxFQURNLENBRWIsSUFBSSxHQUFJSyxDQUFBQSxDQUFD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SW9CLENBQUFBLENBQUksQ0FBR3BCLENBQUssQ0FBQ3FCLEtBQU4sQ0FBWSxDQUFaLENBQVgsQ0FHQSxNQUFPNUMsQ0FBQUEsQ0FBTyxDQUFDdkMsT0FBUixDQUFnQjhELENBQUssQ0FBQ3NCLElBQU4sQ0FBV3ZGLE9BQTNCLENBQW9DaUUsQ0FBSyxDQUFDc0IsSUFBMUMsRUFDTHhFLElBREssQ0FDQTRCLENBQUssRUFBSTBDLENBQUksQ0FBQ2pELFdBQUwsQ0FBaUJPLENBQWpCLENBRFQsRUFFTGhCLEtBRkssQ0FFQ0UsQ0FBSyxFQUFJd0QsQ0FBSSxDQUFDakQsV0FBTCxDQUFpQlAsQ0FBakIsQ0FGVixDQUdQLENBbElXLENBcUtaLEtBQUtDLGtCQUFMLENBQTBCQSxDQUUxQixDQXZLRCxDQXVLRzNDLElBdktILENBdUtRUixJQUFJLENBQUNFLFNBdktiLEMsQ0EwS0FGLElBQUksQ0FBQzZHLGdCQUFMLENBQXNCLFNBQXRCLENBQWlDN0csSUFBSSxDQUFDRSxTQUFMLENBQWVtRixjQUFoRCxDLENBQ0FyRixJQUFJLENBQUM2RyxnQkFBTCxDQUFzQixVQUF0QixDQUFrQzdHLElBQUksQ0FBQ0UsU0FBTCxDQUFldUYsYUFBakQsQyxDQUNBekYsSUFBSSxDQUFDNkcsZ0JBQUwsQ0FBc0IsT0FBdEIsQ0FBK0I3RyxJQUFJLENBQUNFLFNBQUwsQ0FBZXlGLFlBQTlDLEMsQ0FDQTNGLElBQUksQ0FBQzZHLGdCQUFMLENBQXNCLFNBQXRCLENBQWlDN0csSUFBSSxDQUFDRSxTQUFMLENBQWV1RyxjQUFoRCxDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzpcclxuLy8gUGV0aWNpb25lcyBpbnZhbGlkYSBvbmxpbmVcclxuLy8gVmFsaWRhciBjYXRjaCBjb24gZmFsbGFzIGVuIGNhZGEgcHJvbWlzZVxyXG4vLyBWYWxpZGFyIHBlcmZvcm1hbmNlIGRlIGxhIGFwbGljYWNpw7NuIGNvbiB1biBhcmNoaXZvIGdyYW5kZVxyXG4vLyBWYWxpZGFyIHNpIHNlIHJlcXVpZXJlIHVzYXIgZm5IYW5kbGVNZXNzYWdlc0Vycm9yLCBwYXJhIHV0aWxpemFyIGNvbiBlbCBwYXRyw7NuIGNvbW1hbmRcclxuLy8gU2UgZGViZSB2ZXJpZmljYXIgZWwgdXNvIGRlIHN0cmVhbW5pbmdcclxuLy8gXHJcbi8vIFJldmlzYXIgZGUgbnVldm8gbG9zIHNlcnZpY2Ugd29ya2VyXHJcbi8vIHZlciBsbyBkZWwgY29udHJvbGxlciB1c2FyIG51ZXZvcyBldmVudG9zXHJcbi8vIHZlciBzaSBlcyBtZWpvciB1c2FyIHNraXBXYWl0aW5nXHJcbi8vIFxyXG5cclxuc2VsZi5pbXBvcnRTY3JpcHRzKCcvYXNzZXRzL2pzL3dvcmtlcnMvcmVxdWVzdGVyLXRvb2xzLmpzJyk7XHJcblxyXG4vLyBWYXJhYmxlcyBkZWwgbcOzZHVsb1xyXG5zZWxmLnJlcXVlc3RlciA9IHt9O1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHQvKlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFZhbGlkYSBzaSBlbCBwYXJhbWV0cm8gZXMgdW5hIHRpcG8gZGUgb2JqZXRvIGZ1bmN0aW9uXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3M6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gQHg6ICB7b2JqZWN0fSBWYWxvciBhIHZhbGlkYXJcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBSZXRvcm5hOiBTaSBlbCBwYXLDoW1ldHJvIHggZXMgdW5hIGZ1bmNpw7NuIG8gbm9cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBmbklzRnVuY3Rpb24oeCkge1xyXG5cdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PSAnW29iamVjdCBGdW5jdGlvbl0nO1xyXG5cdH0gLy8gZW5kIGZ1bmN0aW9uXHJcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcclxuXHQvKlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFZhbGlkYSBzaSBlbCBwYXJhbWV0cm8gZXMgdW5hIGZ1bmNpw7NuIHkgbGEgZWplY3VjYSBwYXNhbmRvbGUgbG9zIHBhcsOhbWV0cm9zIHF1ZSBzZSBpbmRpcXVlblxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFBhcsOhbWV0cm9zOlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIEBjYjogICAgIHtmdW5jdGlvbn0gIEZ1bmNpw7NuIGEgZWplY3V0YXJcclxuXHRcdC8vIEBhcmcxOiAgIHthbnl9ICAgICAgIFBhcsOhbWV0cm8gYSBlamVjdXRhclxyXG5cdFx0Ly8gQGFyZzI6ICAge2FueX0gICAgICAgUGFyw6FtZXRybyBhIGVqZWN1dGFyXHJcblx0XHQvLyBAYXJnLi4uOiB7YW55fSAgICAgICBQYXLDoW1ldHJvIGEgZWplY3V0YXJcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBSZXRvcm5hOiBFbCByZXN1bHRhZG8gZGUgbGEgZnVuY2nDs25cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBmbkV4ZWNGdW5jdGlvbihjYikge1xyXG5cdFx0dmFyIHBhcnMgPSBmblBhcmFtZXRlcnNXaXRob3V0Rmlyc3QoLi4uYXJndW1lbnRzKTtcclxuXHRcdGlmKGZuSXNGdW5jdGlvbihjYikpIHJldHVybiBwYXJzID8gY2IoLi4ucGFycykgOiBjYihwYXJzKTtcclxuXHR9IC8vIGVuZCBmbkV4ZWNGdW5jdGlvblxyXG5cclxuXHQvKlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIE9idGllbmUgbG9zIHBhcmFtZXRyb3MgZXhjZXB0byBlbCBwcmltZXJvIHkgcmV0b3JuYSB1biBhcnJheVxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQqL1xyXG5cdGZ1bmN0aW9uIGZuUGFyYW1ldGVyc1dpdGhvdXRGaXJzdCgpIHtcclxuXHRcdHZhciBwYXJzLFxyXG5cdFx0XHRzaXplID0gYXJndW1lbnRzLmxlbmd0aDtcclxuXHRcdGlmIChzaXplID4gMSkge1xyXG5cdFx0XHRwYXJzID0gW107XHJcblx0XHRcdGZvcih2YXIgaSA9IDE7IGkgPCBzaXplOyBpKyspIHBhcnNbcGFycy5sZW5ndGhdID0gYXJndW1lbnRzW2ldO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHBhcnM7XHJcblx0fVxyXG5cclxuXHQvLyBDb25zdHJ1Y3RvciBxdWllbiBhZG1pbmlzdHJhIGxvcyBvYnNlcnZhZG9zXHJcblx0ZnVuY3Rpb24gQ29tbWFuZCgpIHtcclxuXHRcdGNvbnN0IF9jb21tYW5kcyA9IHt9LFxyXG5cdFx0XHRfYXBpID0gdGhpcztcclxuXHJcblx0XHRfYXBpLm9uID0gKGNvbW1hbmQsIGZuQ2FsbGJhY2spID0+IHtcclxuXHRcdFx0X2NvbW1hbmRzW2NvbW1hbmRdID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHJldHVybiBmbkV4ZWNGdW5jdGlvbihmbkNhbGxiYWNrLCAuLi5hcmd1bWVudHMpO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRyZXR1cm4gX2FwaTtcclxuXHRcdH1cclxuXHJcblx0XHRfYXBpLm9mZiA9IChjb21tYW5kKSA9PiB7XHJcblx0XHRcdGRlbGV0ZSBfY29tbWFuZHNbY29tbWFuZF07XHJcblx0XHRcdHJldHVybiBfYXBpO1xyXG5cdFx0fVxyXG5cdFx0X2FwaS50cmlnZ2VyID0gZnVuY3Rpb24gKGNvbW1hbmQpIHtcclxuXHRcdFx0bGV0IHBhcnMgPSBmblBhcmFtZXRlcnNXaXRob3V0Rmlyc3QoLi4uYXJndW1lbnRzKSB8fCBbXTtcclxuXHRcdFx0cmV0dXJuIF9jb21tYW5kc1tjb21tYW5kXSguLi5wYXJzKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gX2FwaTtcclxuXHR9XHJcblxyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCAnY29tbWFuZCcsIHsgZ2V0OiAoKSA9PiBuZXcgQ29tbWFuZCgpIH0pO1xyXG59KSgpO1xyXG5cclxuLy8gRGVmaW5pY2nDs24gZGVsIG3Ds2R1bG9cclxuKGZ1bmN0aW9uICgpIHtcclxuXHQvLyBWYXJpYWJsZXMgcHJpdmFkYXNcclxuXHRsZXQgQ0FDSEVfVkVSU0lPTiA9IHNlbGYudG9vbHMuY29uc3RhbnRzLkNBQ0hFX1ZFUlNJT04sXHJcblx0XHRIRUFERVJfSlIgPSBzZWxmLnRvb2xzLmNvbnN0YW50cy5IRUFERVJfSlIsXHJcblx0XHRGSUxFU1RPVVBEQVRFID0gc2VsZi50b29scy5jb25zdGFudHMuRklMRVNUT1VQREFURSxcclxuXHRcdENBQ0hFX0ZJTEVTID0gW1wiXCJdLFxyXG5cdFx0Q09NTUFORCA9IHNlbGYuY29tbWFuZFxyXG5cdFx0XHQub24oJ3JlcXVlc3QnLCBzZW5kUmVxdWVzdClcclxuXHRcdFx0Lm9uKCdmaWxlc1RvVXBkYXRlJywgdXBkYXRlRmlsZXNUb1VwZGF0ZSk7XHJcblxyXG5cdGxldFx0Q0FDSEVfQ1VSUkVOVCxcclxuXHRcdE9SSUdJTl9QQVRIID0gJycsXHJcblx0XHRJTklUX1NFUlZJQ0UgPSBmYWxzZSxcclxuXHRcdHBhdGhzID0gW107XHJcblxyXG5cdC8vIEluaWNpbyBTZXJ2aWNlIFdvcmtlclxyXG5cdHBhdGhzID0gbG9jYXRpb24uaHJlZi5zcGxpdCgnLycpO1xyXG5cdE9SSUdJTl9QQVRIID0gcGF0aHMuc3BsaWNlKDAsIHBhdGhzLmxlbmd0aCAtIDEpLmpvaW4oJy8nKTtcclxuXHRPUklHSU5fUEFUSCArPSAnLyc7XHJcblx0XHJcblx0Ly8gRXJyb3JlcyAgICBcclxuXHRzZWxmLnRvb2xzLmZhY3RvcnlFcnJvcihzZW5kTWVzc2FnZUNsaWVudHMpO1xyXG5cclxuXHQvKipcclxuXHQgKiBGdW5jacOzbiBwYXJhIG9idGVuZXIgbG9zIGFyY2hpdm9zIGVzdGF0aWNvc1xyXG5cdCAqIEByZXR1cm4ge1Byb21pc2U8Q2FjaGU+fSBPYnRpZW5lIGVsIGNhY2hlIHN0b3JhZ2VcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBpbml0KCkge1xyXG5cdFx0aWYgKElOSVRfU0VSVklDRSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG5cdFx0cmV0dXJuIGNhY2hlcy5rZXlzKCkudGhlbihrZXlzID0+IHtcclxuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKGtleXMubWFwKChrZXksIGkpID0+IHtcclxuXHRcdFx0XHRpZiAoa2V5ICE9PSBDQUNIRV9WRVJTSU9OKSByZXR1cm4gY2FjaGVzLmRlbGV0ZShrZXlzW2ldKTtcclxuXHRcdFx0fSkpXHJcblx0XHRcdC50aGVuKCgpID0+IGNhY2hlcy5oYXMoQ0FDSEVfVkVSU0lPTikudGhlbihyZXN1bHQgPT4ge1xyXG5cdFx0XHRcdGxldCBwcm9taXNlQ2FjaGUgPSBjYWNoZXMub3BlbihDQUNIRV9WRVJTSU9OKTtcclxuXHRcdFx0XHRyZXR1cm4gcmVzdWx0ID8gcHJvbWlzZUNhY2hlLnRoZW4oYXNzaWduQ2FjaGUpIDogcHJvbWlzZUNhY2hlLnRoZW4oY2FjaGUgPT4ge1xyXG5cdFx0XHRcdFx0YXNzaWduQ2FjaGUoY2FjaGUpLmFkZEFsbChDQUNIRV9GSUxFUyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC50aGVuKCgpID0+IElOSVRfU0VSVklDRSA9IHRydWUpKTtcclxuXHRcdH0pLmNhdGNoKHNlbGYudG9vbHMuZXJyb3IpO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogRnVuY2nDs24gZGUgcmVjdXJzaXZpZGFkXHJcblx0XHQgKiBAcGFyYW0gIHtDYWNoZVN0b3JhZ2V9IGNhY2hlIGFjdHVhbCBjYWNoZVxyXG5cdFx0ICogQHJldHVybiB7Q2FjaGVTdG9yYWdlfSAgICAgICBhY3R1YWwgY2FjaGVcclxuXHRcdCAqL1xyXG5cdFx0ZnVuY3Rpb24gYXNzaWduQ2FjaGUoY2FjaGUpIHtcclxuXHRcdFx0cmV0dXJuIENBQ0hFX0NVUlJFTlQgPSBjYWNoZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVuYSB2ZXogc2UgaW5zdGFsYSBlbCBzZXJ2aWNlIHdvcmtlciwgZWxpbWluYSBlbCBjYWNoZSB5IHNlIGRlc2NhcmdhIGxvcyBhcmNoaXZvcyBpbmljaWFsZXMgc2kgZWwgY2FjZWggYWN0dWFsIG5vIGVzdGEgZGVmaW5pZG9cclxuXHQgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgZXZlbnRvIGluc3RhbGFyIGRlbCBzZXJ2aWNlIHdvcmtlclxyXG5cdCAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgIFNlIHJlc3VlbHZlIGFsIGluaWNpYXIgZWwgY2FjaGUgYWN0dWFsXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaGFuZGxlckluc3RhbGwoZXZlbnQpIHtcclxuXHRcdC8vIEVzcGVyYSBhIHF1ZSBzZSBvYnRlbmdhbiBsb3MgYXJjaGl2b3MgaW5pY2lhbGVzIGRlIGNhY2hlXHJcblx0XHRldmVudC53YWl0VW50aWwoaW5pdCgpLnRoZW4oc2VsZi5za2lwV2FpdGluZykuY2F0Y2goc2VsZi50b29scy5lcnJvcikpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVW5hIHZleiBzZSBhY3RpdmUgZWwgc2VydmljZSB3b3JrZXIsIGVsaW1pbmEgZWwgY2FjaGUgeSBzZSBkZXNjYXJnYSBsb3MgYXJjaGl2b3MgaW5pY2lhbGVzIHNpIGVsIGNhY2VoIGFjdHVhbCBubyBlc3RhIGRlZmluaWRvXHJcblx0ICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IGV2ZW50byBhY3RpdmFyIGRlbCBzZXJ2aWNlIHdvcmtlclxyXG5cdCAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgIFNlIHJlc3VlbHZlIGFsIGluaWNpYXIgZWwgY2FjaGUgYWN0dWFsXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaGFuZGxlckFjdGl2ZShldmVudCkge1xyXG5cdFx0Ly8gRXNwZXJhIGEgcXVlIHNlIGVsaW1pbmUgbGEgY2FjaGVcclxuXHRcdGV2ZW50LndhaXRVbnRpbChpbml0KCkudGhlbigoKSA9PiBzZWxmLmNsaWVudHMuY2xhaW0oKSkuY2F0Y2goc2VsZi50b29scy5lcnJvcikpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmlsdHJhIHRvZGFzIGxhcyBwZXRpY2lvbmVzIGhhY2lhIGVsIHNlcnZpZG9yLCB5IGRlY2lkZSBzaSBlbnZpYXIgbGEgcGV0aWNpw7NuIGFsIHNlcml2aWRvciBvIHVzYXIgdW5hIHZlcnNpw7NuIGxvY2FsIGRlIGxhIHJlc3B1ZXN0YS5cclxuXHQgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgZXZlbnRvIGZldGNoIGRlbCBzZXJ2aWNlIHdvcmtlclxyXG5cdCAqIEByZXR1cm4ge1Byb21lc2F9ICAgICAgIEVzcGVyYSBtaWVudHJhcyBzZSByZXN1ZWx2ZSBhIGRvbmRlIHJlYWxpemFyIGxhIHBldGljacOzblxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGhhbmRsZXJGZXRjaChldmVudCkge1xyXG5cdFx0Ly8gUGV0aWNpb25lcyByZWFsaXphZGFzIGRlc2RlIHdvcmtlciBvIHBhcmEgc2FsdGFyc2UgZWwgY2FjaGVTdG9yYWdlXHJcblx0XHRpZihldmVudC5yZXF1ZXN0LmhlYWRlcnMuaGFzKEhFQURFUl9KUikpIHtcclxuXHRcdFx0ZXZlbnQucmVxdWVzdC5oZWFkZXJzLnJlbW92ZShIRUFERVJfSlIpO1xyXG5cdFx0XHRyZXR1cm4gZXZlbnQucmVzcG9uZFdpdGgoZmV0Y2goZXZlbnQucmVxdWVzdCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKCFldmVudC5yZXF1ZXN0LnVybC5zdGFydHNXaXRoKHNlbGYubG9jYXRpb24ub3JpZ2luKSkge1xyXG5cdFx0XHRyZXR1cm4gZXZlbnQucmVzcG9uZFdpdGgoZmV0Y2goZXZlbnQucmVxdWVzdCkpO1xyXG5cdFx0fSBcclxuXHJcblx0XHRsZXQgcHJvbWlzZUNhY2hlID0gaW5pdCgpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRsZXQgT0ZGTElORVVSTCA9ICdpbmRleC5odG1sJyxcclxuXHRcdFx0XHRIQVNIVEFHID0gJyMhJyxcclxuXHRcdFx0XHRyZXF1ZXN0ID0gZXZlbnQucmVxdWVzdCxcclxuXHRcdFx0XHRyZXF1ZXN0VXJsID0gcmVxdWVzdC51cmwucmVwbGFjZShPUklHSU5fUEFUSCwgJycpLFxyXG5cdFx0XHRcdHRhcmdldFVybCxcclxuXHRcdFx0XHRvcHRpb25zLFxyXG5cdFx0XHRcdGNvcnM7XHJcblxyXG5cdFx0XHR0YXJnZXRVcmwgPSAoIXJlcXVlc3RVcmwgfHwgcmVxdWVzdFVybC5pbmNsdWRlcyhIQVNIVEFHKSB8fCAhcmVxdWVzdFVybC5pbmRleE9mKCc/JykpID8gT0ZGTElORVVSTCA6IHJlcXVlc3RVcmw7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gc2VsZi50b29scy5nZXRGaWxlKHsgc3JjOiB0YXJnZXRVcmwsIGZyb21GZXRjaDogdHJ1ZSB9KTtcclxuXHJcblx0XHRcdHJldHVybiBDQUNIRV9DVVJSRU5ULm1hdGNoKHRhcmdldFVybCwgeyBpZ25vcmVTZWFyY2g6IHRydWUgfSkudGhlbihyZXNwb25zZUNhY2hlID0+IHtcclxuXHRcdFx0XHRpZihyZXNwb25zZUNhY2hlKSByZXR1cm4gcmVzcG9uc2VDYWNoZTtcclxuXHRcdFx0XHRyZXR1cm4gZmV0Y2godGFyZ2V0VXJsLCBvcHRpb25zKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgcmV0dXJuIHJlc3BvbnNlO1xyXG5cdFx0XHRcdFx0Q0FDSEVfQ1VSUkVOVC5wdXQodGFyZ2V0VXJsLCByZXNwb25zZS5jbG9uZSgpKTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNwb25zZTtcclxuXHRcdFx0XHR9LCBlcnJvciA9PiB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHRcdFx0XHRpZih0YXJnZXRVcmwgPT0gT0ZGTElORVVSTCkgcmV0dXJuO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlYWxpemEgbGEgcGV0aWNpw7NuIGFsIGNhY2hlU3RvcmFnZSBvIGFsIHNlcnZpZG9yXHJcblx0XHRyZXR1cm4gZXZlbnQucmVzcG9uZFdpdGgocHJvbWlzZUNhY2hlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVzYSBlbCBwYXRyw7NuIGNvbW1hbmQgcGFyYSByZWNpYmlyIHkgZW52aWFyIGluZm9ybWFjacOzbiwgc2UgdXNhIHBhcmEgcGV0aWNpb25lcyBwZXJzb25hbGl6YWRhc1xyXG5cdCAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBldmVudG8gbWVzc2FnZSBkZWwgc2VydmljZSB3b3JrZXJcclxuXHQgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICBzZSByZXN1ZWx2ZSB1bmEgdmV6IHNlIG9idGVuZ2EgbGEgaW5mb3JtYWNpw7NuIGRlIGxhIHBldGljacOzblxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGhhbmRsZXJNZXNzYWdlKGV2ZW50KSB7XHJcblx0XHRsZXQgcG9ydCA9IGV2ZW50LnBvcnRzWzBdO1xyXG5cdFx0XHJcblx0XHQvLyBTZSBvYnRpZW5lIGxhIHJlc3B1ZXN0YSB5IGVzdGEgZXMgZW52aWFkYSBhbCBzZXJ2aWRvclxyXG5cdFx0cmV0dXJuIENPTU1BTkQudHJpZ2dlcihldmVudC5kYXRhLmNvbW1hbmQsIGV2ZW50LmRhdGEpXHJcblx0XHRcdC50aGVuKGRhdG9zID0+IHBvcnQucG9zdE1lc3NhZ2UoZGF0b3MpKVxyXG5cdFx0XHQuY2F0Y2goZXJyb3IgPT4gcG9ydC5wb3N0TWVzc2FnZShlcnJvcikpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2UgZW52aWEgYSBsb3MgY2xpZW50ZXMgZWwgbWVuc2FqZSBxdWUgc2UgcGFzYSBjb21vIHDDoXJhbWV0cm9cclxuXHQgKiBAcGFyYW0gIHtPYmplY3R9IG1lbnNhamUgaW5mb3JtYWNpw7NuIHF1ZSBzZSBxdWllcmUgdHJhbnNtaXRpciBhbCB1c3VhcmlvXHJcblx0ICogQHJldHVybiB7UHJvbWlzZX0gICAgIFNlIHJlc3VlbHZlIHVuYSB2ZXogc2UgZW52aWEgZWwgbWVuc2FqZSBhIHRvZG9zIGxvcyBjbGllbnRlcyBzb2xpY2l0YWRvc1xyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIHNlbmRNZXNzYWdlQ2xpZW50cyhtZW5zYWplKSB7XHJcblx0XHRyZXR1cm4gc2VsZi5jbGllbnRzLm1hdGNoQWxsKCkudGhlbihjbGllbnRzID0+IHtcclxuXHRcdFx0Y2xpZW50cy5mb3JFYWNoKGNsaWVudCA9PiBjbGllbnQucG9zdE1lc3NhZ2UoYFNXIFNheXM6ICcke0pTT04uc3RyaW5naWZ5KG1lbnNhamUpfSdgKSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNlbmRSZXF1ZXN0KGRhdG9zKSB7XHJcblx0XHRpZiAoIW5hdmlnYXRvci5vbkxpbmUgJiYgZGF0b3Muc3JjID09IEZJTEVTVE9VUERBVEUpIHtcclxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IHJlc3VsdDoge30sIHBhdGg6IEZJTEVTVE9VUERBVEUsIG9ic2VydmVkSWQ6IGRhdG9zLm9ic2VydmVkSWQgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHNlbGYudG9vbHMuZ2V0RmlsZShkYXRvcyk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB1cGRhdGVGaWxlc1RvVXBkYXRlKCkge1xyXG5cdFx0aWYoIW5hdmlnYXRvci5vbkxpbmUpIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2VsZi50b29scy5jb25zdGFudHMuRklMRVNfU0VSVkVSID0ge30pO1xyXG5cclxuXHRcdHJldHVybiBmZXRjaChGSUxFU1RPVVBEQVRFLCB7IGhlYWRlcnM6IHsgY2FjaGU6ICduby1jYWNoZScgfSB9KVxyXG5cdFx0XHQudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcblx0XHRcdC50aGVuKGZpbGVzID0+IHNlbGYudG9vbHMuY29uc3RhbnRzLkZJTEVTX1NFUlZFUiA9IGZpbGVzKTtcclxuXHR9XHJcblxyXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ly8gUHVibGljIEFQSVxyXG5cdHRoaXMuaGFuZGxlckluc3RhbGwgPSBoYW5kbGVySW5zdGFsbDtcclxuXHR0aGlzLmhhbmRsZXJBY3RpdmUgPSBoYW5kbGVyQWN0aXZlO1xyXG5cdHRoaXMuaGFuZGxlckZldGNoID0gaGFuZGxlckZldGNoO1xyXG5cdHRoaXMuaGFuZGxlck1lc3NhZ2UgPSBoYW5kbGVyTWVzc2FnZTtcclxuXHR0aGlzLnNlbmRNZXNzYWdlQ2xpZW50cyA9IHNlbmRNZXNzYWdlQ2xpZW50cztcclxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG59KS5jYWxsKHNlbGYucmVxdWVzdGVyKTtcclxuXHJcbi8vIEFzaWduYWNpw7NuIGRlIGV2ZW50b3Ncclxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgc2VsZi5yZXF1ZXN0ZXIuaGFuZGxlckluc3RhbGwpO1xyXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2FjdGl2YXRlJywgc2VsZi5yZXF1ZXN0ZXIuaGFuZGxlckFjdGl2ZSk7XHJcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBzZWxmLnJlcXVlc3Rlci5oYW5kbGVyRmV0Y2gpO1xyXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBzZWxmLnJlcXVlc3Rlci5oYW5kbGVyTWVzc2FnZSk7Il0sImZpbGUiOiJzZXJ2aWNlLXdvcmtlci5qcyJ9
