self.tools={},function(){function a(){return o?Promise.resolve():caches.open(t).then(a=>o=a)}function b(a){if(v==a.src&&p)return j(a,new Request(a.srcToRequest,{method:"POST",body:"[]"}));let b=new Request(a.srcToRequest,{method:a.method,cache:"no-cache",headers:new Headers({"Content-Type":a.mime,HEADER_JR:u}),body:JSON.stringify(a.value)});return fetch(b).then(function(b){if(!b.ok)throw`${b.status} ${b.statusText}`;let c;return c=a.cache?a.saveFile(a,b).then(i):j(a,b),c},a=>{throw a.message})}function c(a){return a.response instanceof Response?a.response:{result:a.result,path:a.src,observedId:a.observedId,ext:a.ext}}function d(a){var b,c,d=a.name.indexOf("?"),e=a.name;switch(-1<d&&(e=e.substring(0,d)),c=e.split("."),c=c[c.length-1].toLowerCase(),c){case"jpg":case"png":b=r.BLOB,c="blob";break;case"css":b=r.CSS;break;case"js":b=r.JS;break;case"json":b=r.JSON,a.isText=!0,a.methodBody="json";break;case"txt":case"html":b=r.TEXT,a.methodBody="text",a.isText=!0;break;default:b=r.JS,c="js";}a.ext=c,a.mime=a.mime||b}function e(a){var b="Error: ";return b+=a,b+=", ",m?m(a.toString()):void 0,a}function f(a){return new Promise((b,c)=>{null===a.onerror&&(a.onerror=b=>c(b,a)),null===a.onsuccess?a.onsuccess=c=>b(c,a):b(a)})}function g(){let a,b;return new Promise(async c=>q?c(q):void(p=!1,a=indexedDB.open(s.NAME,s.VERSION),a.onupgradeneeded=async a=>{p=!0,q=a.target.result,b=q.createObjectStore(s.TABLE,{keyPath:s.KEYPATH}),b.createIndex(s.TABLE,s.KEYPATH),b.transaction.oncomplete=()=>c(q)},f(a).then(a=>c(q=a.target.result))))}function h(a){async function b(a){let b=n[a.name],c=!b||isNaN(a.date)||b.valueOf()>=a.date;return c}return new Promise(c=>n?c(b(a)):void g().then(d=>{if(v==a.src&&p)return c(!1);let e=d.transaction(s.TABLE,"readonly").objectStore(s.TABLE).getAll();return f(e).then(()=>{n={},e.result.forEach(a=>n[a[s.KEYPATH]]=a.date),c(b(a))})}))}function i(a){return g().then(b=>{let c=b.transaction(s.TABLE,"readwrite").objectStore(s.TABLE).put({name:a.name,date:a.date});return f(c).then(()=>(n[a[s.KEYPATH]]=a.date,a))})}function j(a,b){return a.fromFetch?(a.response=b,Promise.resolve(a)):b[a.methodBody]().then(b=>(a.result=b,b instanceof Blob&&!b.type&&(a.result=b.slice(b,b.size,a.mime)),a))}function k(a){return o.match(a.srcToRequest).then(function(c){return c?j(a,c):b(a)})}function l(a,b){return a.date=new Date,o.put(b.url,b.clone()),j(a,b)}let m,n,o,p,q;const r={BLOB:"application/octet-stream",CSS:"text/css; charset=\"utf-8\"",IMG:"image/jpeg",JS:"text/javascript; charset=\"utf-8\"",JSON:"application/json; charset=\"utf-8\"",TEXT:"text/plain; charset=\"utf-8\"",FORMQ:"application/x-www-form-urlencoded",FORMDATA:"multipart/form-data"},s={NAME:"jrTable",VERSION:1,TABLE:"files",KEYPATH:"name"},t="0.0.1",u="H_JR",v="/assets/config/filesToUpdate.json";this.factoryError=function(a){m=a},this.getFile=function(f){let g={};return g.name=f.src.split("/"),g.name=g.name[g.name.length-1],Object.assign(g,{cache:!0,method:"GET",methodBody:"blob"},f),d(g),g.date=Date.parse(this.constants.FILES_SERVER[g.name]),g.srcToRequest=`${location.origin}/${f.src}`,g.getSavedFile=g.getSavedFile||k,g.saveFile=g.saveFile||l,a().then(()=>h(g).then(a=>(a&&g.cache?g.getSavedFile(g):b(g)).then(c,e),e))},this.sendRequest=b,this.saveResponseDB=i,this.getResult=j,this.constants={HEADER_JR:"H_JR",CACHE_VERSION:"0.0.1",FILESTOUPDATE:"/assets/config/filesToUpdate.json",FILES_SERVER:{}}}.call(self.tools);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVlc3Rlci10b29scy5qcyJdLCJuYW1lcyI6WyJzZWxmIiwidG9vbHMiLCJmbkdldENhY2hlIiwiX2N1cnJlbnRDYWNoZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2FjaGVzIiwib3BlbiIsIkNBQ0hFX1ZFUlNJT04iLCJ0aGVuIiwiY2FjaGUiLCJmblNlbmRSZXF1ZXN0IiwiZGF0YSIsIkZJTEVTVE9VUERBVEUiLCJzcmMiLCJfZmlyc3RMb2FkUGFnZSIsImZuR2V0UmVzdWx0IiwiUmVxdWVzdCIsInNyY1RvUmVxdWVzdCIsIm1ldGhvZCIsImJvZHkiLCJyZXF1ZXN0IiwiaGVhZGVycyIsIkhlYWRlcnMiLCJtaW1lIiwiSEVBREVSX0pSIiwiSlNPTiIsInN0cmluZ2lmeSIsInZhbHVlIiwiZmV0Y2giLCJyZXNwb25zZSIsIm9rIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInByb21pc2VSZXBvbnNlIiwic2F2ZUZpbGUiLCJmblNhdmVSZXNwb25zZURCIiwiZXJyb3IiLCJtZXNzYWdlIiwiZm5HZXRPYmplY3QiLCJSZXNwb25zZSIsInJlc3VsdCIsInBhdGgiLCJvYnNlcnZlZElkIiwiZXh0IiwiZm5HZXRNaW1lIiwiZXh0ZW5zaW9uIiwiaW5kaWNlUXVlcnkiLCJuYW1lIiwiaW5kZXhPZiIsIm5hbWVTcmMiLCJzdWJzdHJpbmciLCJzcGxpdCIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiTUlNRVMiLCJCTE9CIiwiQ1NTIiwiSlMiLCJpc1RleHQiLCJtZXRob2RCb2R5IiwiVEVYVCIsImZuT25FcnJvciIsInN0ckVycm9yIiwiX2ZhY3RvcnlFcnJvciIsInRvU3RyaW5nIiwiZ2V0UmVxdWVzdENvbXBsZXRlIiwicmVqZWN0Iiwib25lcnJvciIsImUiLCJvbnN1Y2Nlc3MiLCJnZXREQiIsIm9iamVjdFN0b3JlIiwiX2RhdGFCYXNlIiwiaW5kZXhlZERCIiwiREIiLCJOQU1FIiwiVkVSU0lPTiIsIm9udXBncmFkZW5lZWRlZCIsInRhcmdldCIsImNyZWF0ZU9iamVjdFN0b3JlIiwiVEFCTEUiLCJrZXlQYXRoIiwiS0VZUEFUSCIsImNyZWF0ZUluZGV4IiwidHJhbnNhY3Rpb24iLCJvbmNvbXBsZXRlIiwiZm5Jc1VwZGF0ZUZpbGUiLCJ1cGRhdGVGaWxlIiwiX2RhdGEiLCJpbmZvU2F2ZWQiLCJfZmlsZXNDbGllbnQiLCJpc1VwZGF0ZWQiLCJpc05hTiIsImRhdGUiLCJ2YWx1ZU9mIiwiZGF0YWJhc2UiLCJyZXNxdWVzdCIsImdldEFsbCIsImZvckVhY2giLCJyZWNvcmQiLCJwdXQiLCJmcm9tRmV0Y2giLCJCbG9iIiwidHlwZSIsInNsaWNlIiwic2l6ZSIsImZuR2V0U2F2ZWRGaWxlIiwibWF0Y2giLCJmblNhdmVGaWxlIiwiRGF0ZSIsInVybCIsImNsb25lIiwiSU1HIiwiRk9STVEiLCJGT1JNREFUQSIsImZhY3RvcnlFcnJvciIsImZuQ2FsbGJhY2siLCJnZXRGaWxlIiwicGFycyIsIk9iamVjdCIsImFzc2lnbiIsInBhcnNlIiwiY29uc3RhbnRzIiwiRklMRVNfU0VSVkVSIiwibG9jYXRpb24iLCJvcmlnaW4iLCJnZXRTYXZlZEZpbGUiLCJzZW5kUmVxdWVzdCIsInNhdmVSZXNwb25zZURCIiwiZ2V0UmVzdWx0IiwiY2FsbCJdLCJtYXBwaW5ncyI6IkFBR0FBLElBQUksQ0FBQ0MsS0FBTCxDQUFhLEUsQ0FHWixVQUFXLENBbUNYLFFBQVNDLENBQUFBLENBQVQsRUFBc0IsT0FDbEJDLENBQUFBLENBRGtCLENBQ0lDLE9BQU8sQ0FBQ0MsT0FBUixFQURKLENBRWRDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZQyxDQUFaLEVBQTJCQyxJQUEzQixDQUFnQ0MsQ0FBSyxFQUFJUCxDQUFhLENBQUdPLENBQXpELENBQ1AsQ0FrRUQsUUFBU0MsQ0FBQUEsQ0FBVCxDQUF1QkMsQ0FBdkIsQ0FBNkIsQ0FDNUIsR0FBR0MsQ0FBYSxFQUFJRCxDQUFJLENBQUNFLEdBQXRCLEVBQTZCQyxDQUFoQyxDQUNDLE1BQU9DLENBQUFBLENBQVcsQ0FBQ0osQ0FBRCxDQUFPLEdBQUlL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akMsQ0FBTzNHLENBQVUsR0FBR08sSUFBYixDQUFrQixJQUNqQjhFLENBQWMsQ0FBQzNFLENBQUQsQ0FBZCxDQUFxQkgsSUFBckIsQ0FBMEJtRixDQUFTLEVBQ2xDLENBQUdBLENBQUQsRUFBZWhGLENBQUksQ0FBQ0YsS0FBckIsQ0FBb0RFLENBQUksQ0FBQ21ILFlBQUwsQ0FBa0JuSCxDQUFsQixDQUFwRCxDQUE4QkQsQ0FBYSxDQUFDQyxDQUFELENBQTVDLEVBQThFSCxJQUE5RSxDQUFtRjhCLENBQW5GLENBQWdHdUIsQ0FBaEcsQ0FERCxDQUVKQSxDQUZJLENBREQsQ0FLUCxDQXpGVSxDQXFhWCxLQUFLa0UsV0FBTCxDQUFtQnJILENBcmFSLENBc2FYLEtBQUtzSCxjQUFMLENBQXNCN0YsQ0F0YVgsQ0F1YVgsS0FBSzhGLFNBQUwsQ0FBaUJsSCxDQXZhTixDQTBhWCxLQUFLMkcsU0FBTCxDQUFpQixDQUNoQmxHLFNBQVMsT0FETyxDQUVoQmpCLGFBQWEsUUFGRyxDQUdoQkssYUFBYSxvQ0FIRyxDQUloQitHLFlBQVksQ0FBRSxFQUpFLENBT2pCLENBamJELENBaWJHTyxJQWpiSCxDQWliUW5JLElBQUksQ0FBQ0MsS0FqYmIsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRPRE86IEN1YW5kbyBlcyB1bmEgcGV0aWNpw7NuIGRlIHNlcnZpY2Ugd29ya2VyIHZlciBzaSBlcyBuZWNlc2FyaW8gbGVlciBlbCBibG9iIG8gc29sbyB1c2FyIGxvcyBtw6l0b2RvcyBuYXRpdm9zIGRlIEpTXHJcblxyXG4vLyBFc3BhY2lvIGRlIG5vbWJyZXNcclxuc2VsZi50b29scyA9IHt9O1xyXG5cclxuLy8gRGVmaW5pY2nDs24gZGVsIG3Ds2R1bG9cclxuKGZ1bmN0aW9uKCkge1xyXG5cdGxldCBfZmFjdG9yeUVycm9yLFxyXG5cdFx0X2ZpbGVzQ2xpZW50LFxyXG5cdFx0X2N1cnJlbnRDYWNoZSxcclxuXHRcdF9maXJzdExvYWRQYWdlLFxyXG5cdFx0X2RhdGFCYXNlO1xyXG5cclxuXHQvLyBNaW1lIHR5cGVzIHF1ZSBwZXJtaXRlIGVsIHdvcmtlciBwYXJhIGltcG9ydGFyIGFyY2hpdm9zXHJcblx0Y29uc3QgXHJcblx0XHRNSU1FUyA9IHtcclxuXHRcdFx0QkxPQjogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsXHJcblx0XHRcdENTUzogJ3RleHQvY3NzOyBjaGFyc2V0PVwidXRmLThcIicsXHJcblx0XHRcdElNRzogJ2ltYWdlL2pwZWcnLFxyXG5cdFx0XHRKUzogJ3RleHQvamF2YXNjcmlwdDsgY2hhcnNldD1cInV0Zi04XCInLFxyXG5cdFx0XHRKU09OOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1cInV0Zi04XCInLFxyXG5cdFx0XHRURVhUOiAndGV4dC9wbGFpbjsgY2hhcnNldD1cInV0Zi04XCInLFxyXG5cdFx0XHRGT1JNUTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHRcdEZPUk1EQVRBOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcclxuXHRcdH0sIFxyXG5cdFx0REIgPSB7XHJcblx0XHRcdE5BTUU6ICdqclRhYmxlJyxcclxuXHRcdFx0VkVSU0lPTjogMSxcclxuXHRcdFx0VEFCTEU6ICdmaWxlcycsXHJcblx0XHRcdEtFWVBBVEg6ICduYW1lJ1xyXG5cdFx0fSxcclxuXHRcdENBQ0hFX1ZFUlNJT04gPSAnMC4wLjEnLFxyXG5cdFx0SEVBREVSX0pSID0gJ0hfSlInLFxyXG5cdFx0RklMRVNUT1VQREFURSA9ICcvYXNzZXRzL2NvbmZpZy9maWxlc1RvVXBkYXRlLmpzb24nO1xyXG5cclxuXHQvKlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIE9idGllbmUgZWwgY2FjaGUgaW5pY2lhbFxyXG5cdFx0Ly8gZXhwbG9yYWRvciDDqXN0ZSBlcyBjcmVhZG9cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki8gICAgXHJcblx0ZnVuY3Rpb24gZm5HZXRDYWNoZSgpIHtcclxuXHRcdGlmKF9jdXJyZW50Q2FjaGUpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuXHRcdHJldHVybiBjYWNoZXMub3BlbihDQUNIRV9WRVJTSU9OKS50aGVuKGNhY2hlID0+IF9jdXJyZW50Q2FjaGUgPSBjYWNoZSk7ICAgIFxyXG5cdH1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBJbmljaW8gZGVsIHdvcmtlciwgdG9tYSBlbCBGaWxlU3lzdGVtIHkgYW50ZXMgdG9tYSBlbCBhcmNoaXZvLCBzaSBlbCBhcmNoaXZvIG5vIGVzdGEgZW5cclxuXHRcdC8vIGV4cGxvcmFkb3Igw6lzdGUgZXMgY3JlYWRvXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3M6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gQHBhcnM6ICAgICAgICAgICBpbmZvcm1hY2nDs24gZGVsIGFyY2hpdm8gYSBzb2xpY2l0YXIge31cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBAcGFycy5jYWNoZTogICAgIFBhcmEgcXVlIG5vIHNlIGd1YXJkZSBlbiBlbCBleHBsb3JhZG9yIGRlIHNlciAwICggMCB8fCAxKVxyXG5cdFx0Ly8gQHBhcnMuc3JjOiAgICAgICBEaXJlY2Npw7NuIGRlbCBhcmNoaXZvIGEgc29saWNpdGFyLiAgJydcclxuXHRcdC8vIEBwYXJzLm1pbWU6ICAgICAgRWwgdGlwbyBkZSBtaW1lIHF1ZSBzZSB0cmFlcsOhXHJcblx0XHQvLyBAcGFycy5tZXRob2Q6ICAgIFRpcG8gZGUgcGV0aWNpw7NuIHF1ZSBzZSBoYXLDoSBhbCBzZXJ2aWRvclxyXG5cdFx0Ly8gQHBhcnMuZmlsZXM6ICAgICBPYmpldG8gcXVlIGNvbnRpZW5lIGxvcyBhcmNoaXZvcyBhIGFjdHVhbGl6YXJcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBSZXRvcm5hOiAgICBSZXRvcm5hIGxhIHJlc3B1ZXN0YSBkZWwgc2Vydmlkb3JcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBmbkdldEZpbGUocGFycykge1xyXG5cdFx0Ly8gdmFyaWFibGVzIHByaXZhZGFzXHJcblx0XHRsZXQgZGF0YSA9IHt9O1xyXG5cclxuXHRcdC8vIFNlIG9idGllbmUgZWwgbm9tYnJlIGRlbCBhcmNoaXZvIG8gcnV0YSBkZSBsYSBwZXRpY2nDs25cclxuXHRcdGRhdGEubmFtZSA9IHBhcnMuc3JjLnNwbGl0KFwiL1wiKTtcclxuXHRcdGRhdGEubmFtZSA9IGRhdGEubmFtZVtkYXRhLm5hbWUubGVuZ3RoIC0gMV07XHJcblxyXG5cdFx0Ly8gU2UgY29tYmluYW4gbG9zIHBhcsOhbWV0cm9zIGRlIGxhIHBldGljacOzbiBhIHJlYWxpemFyLCBjb24gcGFyw6FtZXRyb3MgcG9yIGRlZmVjdG9cclxuXHRcdE9iamVjdC5hc3NpZ24oZGF0YSwgeyBjYWNoZTogdHJ1ZSwgbWV0aG9kOiAnR0VUJywgbWV0aG9kQm9keTogJ2Jsb2InIH0sIHBhcnMpO1xyXG5cclxuXHRcdC8vIFNlIG9idGllbmUgZWwgbWltZSBkZSBsYSBwZXRpY2nDs25cclxuXHRcdGZuR2V0TWltZShkYXRhKTtcclxuXHJcblx0XHRkYXRhLmRhdGUgPSBEYXRlLnBhcnNlKHRoaXMuY29uc3RhbnRzLkZJTEVTX1NFUlZFUltkYXRhLm5hbWVdKTtcclxuXHRcdGRhdGEuc3JjVG9SZXF1ZXN0ID0gYCR7bG9jYXRpb24ub3JpZ2lufS8ke3BhcnMuc3JjfWA7XHJcblxyXG5cdFx0Ly8gU2kgc2UgdXRpbGl6YSB1biBhbG9qYW1pZW50byBkaWZlcmVudGUgYSBjYWNoZVN0b3JhZ2VcclxuXHRcdGRhdGEuZ2V0U2F2ZWRGaWxlID0gZGF0YS5nZXRTYXZlZEZpbGUgfHwgZm5HZXRTYXZlZEZpbGU7XHJcblx0XHRkYXRhLnNhdmVGaWxlID0gZGF0YS5zYXZlRmlsZSB8fCBmblNhdmVGaWxlO1xyXG5cclxuXHRcdC8qXHJcblx0XHRcdC8vIFNpIGVsIGFyY2hpdm8gc2UgZW5jdWVudHJhIGVuIGVsIC5qc29uIGRlIGFyY2hpdm9zIGEgYWN0dWFsaXphciAoZmlsZXNUb1VwZGF0ZSkgc2UgdmFsaWRhIGxhIGZlY2hhXHJcblx0XHRcdC8vIGRlIGxhIMO6bHRpbWEgbW9kaWZpY2FjacOzbiwgY29uIGxhIGZlY2hhIHF1ZSBzZSBlbmN1ZW50cmEgZW4gZWwgYXJjaGl2byBsb2NhbCB5IHNpIGVzIG1heW9yIGxhIGZlY2hhIFxyXG5cdFx0XHQvLyBkZWwgb2JqZXRvIGVzIG1heW9yIGEgbGEgZGVsIGxvY2FsIGVudG9uY2VzIHNlIGhhY2UgbGEgcGV0aWNpw7NuIGFsIHNlcnZpZG9yIHkgc2UgZ3VhcmRhIGVuIGVsIG5hdmVnYWRvci5cclxuXHRcdCovXHJcblx0XHRyZXR1cm4gZm5HZXRDYWNoZSgpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZm5Jc1VwZGF0ZUZpbGUoZGF0YSkudGhlbihpc1VwZGF0ZWQgPT4ge1xyXG5cdFx0XHRcdHJldHVybiAoKCFpc1VwZGF0ZWQgfHwgIWRhdGEuY2FjaGUpID8gZm5TZW5kUmVxdWVzdChkYXRhKSA6IGRhdGEuZ2V0U2F2ZWRGaWxlKGRhdGEpKS50aGVuKGZuR2V0T2JqZWN0LCBmbk9uRXJyb3IpO1xyXG5cdFx0XHR9LCBmbk9uRXJyb3IpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8qXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gU2UgaGFjZSBzb2xpY2l0dWQgYWwgc2Vydmlkb3IgeSBsYSByZXNwdWVzdGEgZXMgZ3VhcmRhcmEgY29uIGVsIEFQSSBGaWxlU3lzdGVtLCBvIENhY2hlU3RvcmFnZVxyXG5cdFx0Ly8gZGVwZW5kaWVuZG8gZGUgbGEgY29uZmlndXJhY2nDs24uXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3M6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gQGRhdGE6ICAgICB7b2JqZWN0fSBJbmZvcm1hY2nDs24gZGUgbGEgcGV0aWNpw7NuIGEgcmVhbGl6YXIuXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUmV0b3JuYSB1bmEgcHJvbWVzYSBkZSBmZXRjaFxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQqL1xyXG5cdGZ1bmN0aW9uIGZuU2VuZFJlcXVlc3QoZGF0YSkge1xyXG5cdFx0aWYoRklMRVNUT1VQREFURSA9PSBkYXRhLnNyYyAmJiBfZmlyc3RMb2FkUGFnZSkge1xyXG5cdFx0XHRyZXR1cm4gZm5HZXRSZXN1bHQoZGF0YSwgbmV3IFJlcXVlc3QoZGF0YS5zcmNUb1JlcXVlc3QsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6ICdbXScgfSkpOyAgXHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdChkYXRhLnNyY1RvUmVxdWVzdCwge1xyXG5cdFx0XHRtZXRob2Q6IGRhdGEubWV0aG9kLFxyXG5cdFx0XHRjYWNoZTogJ25vLWNhY2hlJyxcclxuXHRcdFx0aGVhZGVyczogbmV3IEhlYWRlcnMoeyBcclxuXHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBkYXRhLm1pbWUsXHJcblx0XHRcdFx0SEVBREVSX0pSOiBIRUFERVJfSlJcclxuXHRcdFx0fSksXHJcblx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEudmFsdWUpXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTZSBvYnRpZW5lIGxhIHJlc3B1ZXN0YSBkZWwgc2Vydmlkb3IgeSBzZSByZXRvcm5hIGxhIHByb21lc2FcclxuXHRcdHJldHVybiBmZXRjaChyZXF1ZXN0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cdFx0XHRpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBgJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gO1xyXG5cdFx0XHRsZXQgcHJvbWlzZVJlcG9uc2U7XHJcblx0XHRcdGlmKCFkYXRhLmNhY2hlKSBwcm9taXNlUmVwb25zZSA9IGZuR2V0UmVzdWx0KGRhdGEsIHJlc3BvbnNlKTtcclxuXHRcdFx0ZWxzZSBwcm9taXNlUmVwb25zZSA9IGRhdGEuc2F2ZUZpbGUoZGF0YSwgcmVzcG9uc2UpLnRoZW4oZm5TYXZlUmVzcG9uc2VEQik7XHJcblx0XHRcdHJldHVybiBwcm9taXNlUmVwb25zZTtcclxuXHRcdH0sIGVycm9yID0+IHtcclxuXHRcdCAgIHRocm93IGVycm9yLm1lc3NhZ2U7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBTZSBjYXB0dXJhIGxhIGluZm9ybWFjacOzbiB5IHNlIGVudmlhIGEgbGEgQXBwIFxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFBhcsOhbWV0cm9zOlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIEBkYXRhOiAgICAgICAgIHtvYmplY3R9ICAgICBJbmZvcm1hY2nDs24gZGUgbGEgcGV0aWNpw7NuIHJlYWxpemFkYS5cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBSZXRvcm5hOiBQcm9tZXNhIGNvbiBsYSByZXNwdWVzdGEgZGUgbGEgcGV0aWNpw7NuXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZm5HZXRPYmplY3QoZGF0YSkge1xyXG5cdFx0aWYoZGF0YS5yZXNwb25zZSBpbnN0YW5jZW9mIFJlc3BvbnNlKSByZXR1cm4gZGF0YS5yZXNwb25zZTtcclxuXHRcdFxyXG5cdFx0Ly8gVE9ETzogR2FyYmFnZSBjb2xsZWN0b3JcclxuXHRcdHJldHVybiB7IFxyXG5cdFx0XHRyZXN1bHQ6IGRhdGEucmVzdWx0LCBcclxuXHRcdFx0cGF0aDogZGF0YS5zcmMsIFxyXG5cdFx0XHRvYnNlcnZlZElkOiBkYXRhLm9ic2VydmVkSWQsXHJcblx0XHRcdGV4dDogZGF0YS5leHRcclxuXHRcdH07XHJcblx0fVxyXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8qXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gRnVuY2nDs24gcGFyYSBvYnRlbmVyIGxhIGV4dGVuc2nDs24gZGUgdW4gYXJjaGl2b1xyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFBhcsOhbWV0cm9zOlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIEBuYW1lOiAgICAgICBSdXRhIGRlIGxhIHBldGljacOzblxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFJldG9ybmE6ICAgICBQcm9waWVkYWQgZGUgTUlNRVNcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBmbkdldE1pbWUoZGF0YSkge1xyXG5cdFx0dmFyIG1pbWUsIGV4dGVuc2lvbiwgXHJcblx0XHRcdGluZGljZVF1ZXJ5ID0gZGF0YS5uYW1lLmluZGV4T2YoJz8nKSwgXHJcblx0XHRcdG5hbWVTcmMgPSBkYXRhLm5hbWU7XHJcblxyXG5cdFx0aWYoaW5kaWNlUXVlcnkgPiAtMSkgbmFtZVNyYyA9IG5hbWVTcmMuc3Vic3RyaW5nKDAsIGluZGljZVF1ZXJ5KTtcclxuXHRcdGV4dGVuc2lvbiA9IG5hbWVTcmMuc3BsaXQoJy4nKTtcclxuXHRcdGV4dGVuc2lvbiA9IGV4dGVuc2lvbltleHRlbnNpb24ubGVuZ3RoIC0gMV0udG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHQvLyBJbcOhZ2VuZXNcclxuXHRcdHN3aXRjaChleHRlbnNpb24pIHtcclxuXHRcdFx0Y2FzZSAnanBnJzogXHJcblx0XHRcdGNhc2UgJ3BuZyc6IFxyXG5cdFx0XHRcdG1pbWUgPSBNSU1FUy5CTE9CO1xyXG5cdFx0XHRcdGV4dGVuc2lvbiA9ICdibG9iJztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnY3NzJzpcclxuXHRcdFx0XHRtaW1lID0gTUlNRVMuQ1NTO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdqcyc6XHJcblx0XHRcdFx0bWltZSA9IE1JTUVTLkpTO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdqc29uJzpcclxuXHRcdFx0XHRtaW1lID0gTUlNRVMuSlNPTjtcclxuXHRcdFx0XHRkYXRhLmlzVGV4dCA9IHRydWU7XHJcblx0XHRcdFx0ZGF0YS5tZXRob2RCb2R5ID0gJ2pzb24nO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICd0eHQnOiBcclxuXHRcdFx0Y2FzZSAnaHRtbCc6IFxyXG5cdFx0XHRcdG1pbWUgPSBNSU1FUy5URVhUO1xyXG5cdFx0XHRcdGRhdGEubWV0aG9kQm9keSA9ICd0ZXh0JztcclxuXHRcdFx0XHRkYXRhLmlzVGV4dCA9IHRydWU7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0bWltZSA9IE1JTUVTLkpTO1xyXG5cdFx0XHRcdGV4dGVuc2lvbiA9ICdqcyc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0ZGF0YS5leHQgPSBleHRlbnNpb247XHJcblx0XHRkYXRhLm1pbWUgPSBkYXRhLm1pbWUgfHwgbWltZTtcclxuXHR9XHJcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBBZ3JlZ2EgdGV4dG8gZGVudHJvIGRlIGxhIGNvbnNvbGEsIHBhcmEgZWwgbWFuZWpvIGRlIGVycm9yZXNcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBQYXLDoG1ldHJvczpcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBAZTogIFBhcsOhbWV0cm8gcXVlIHJldG9ybmEgdW4gZXJyb3IgZW4gbGEgZXN0cnVjdHVyYSB0cnksIGNhdGNoXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZm5PbkVycm9yKGVycm9yKSB7XHJcblx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHR2YXIgc3RyRXJyb3IgPSAnRXJyb3I6ICc7XHJcblx0XHRzdHJFcnJvciArPSBlcnJvcjtcclxuXHRcdHN0ckVycm9yICs9ICcsICc7XHJcblx0XHRfZmFjdG9yeUVycm9yID8gX2ZhY3RvcnlFcnJvcihlcnJvci50b1N0cmluZygpKSA6IGNvbnNvbGUubG9nKHN0ckVycm9yKTtcclxuXHRcdHJldHVybiBlcnJvcjtcclxuXHR9XHJcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBGdW5jacOzbiBwYXJhIGVzdGFibGVjZXIgbGEgZm9tYXIgZW4gY29tbyBzZSBtYW5lamFuIGxvcyBlcnJvcmVzXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3M6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUmV0b3JuYTogICAgIEJsb2IuXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZm5IYW5kbGVFcnJvcihmbkNhbGxiYWNrKSB7XHJcblx0XHRfZmFjdG9yeUVycm9yID0gZm5DYWxsYmFjaztcclxuXHR9XHJcblxyXG5cdC8qXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gT2J0aWVuZSB1biBQcm9taXNlIHBvciBjYWRhIHJlcXVlc3QgcXVlIHNlIGhhZ2FcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBQYXLDoW1ldHJvczpcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyByZXF1ZXN0OiAgICBSZXF1ZXN0IHF1ZSBzZSByZWFsaXphIGEgSW5kZXhlZERCXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUmV0b3JuYTogICAgIHtQcm9taXNlfS5cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBnZXRSZXF1ZXN0Q29tcGxldGUocmVxdWVzdCkge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0aWYocmVxdWVzdC5vbmVycm9yID09PSBudWxsKSByZXF1ZXN0Lm9uZXJyb3IgPSBlID0+IHJlamVjdChlLCByZXF1ZXN0KTtcclxuXHRcdFx0aWYocmVxdWVzdC5vbnN1Y2Nlc3MgPT09IG51bGwpIHJlcXVlc3Qub25zdWNjZXNzID0gZSA9PiByZXNvbHZlKGUsIHJlcXVlc3QpO1xyXG5cdFx0XHRlbHNlIHJlc29sdmUocmVxdWVzdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gT2J0aWVuZSB1biBQcm9taXNlIHVuYSB2ZXogZXN0YSBzZWEgcmVzdWVsdGEgc2UgZW52aWEgZWwgcGFyw6FtZXRybyBkYXRhYmFzZVxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFJldG9ybmE6ICAgICB7UHJvbWlzZS50aGVuKGRhdGFiYXNlKX0uXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZ2V0REIoKSB7XHJcblx0XHRsZXQgcmVxdWVzdCwgXHJcblx0XHRcdG9iamVjdFN0b3JlO1xyXG5cclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdGlmKF9kYXRhQmFzZSkgcmV0dXJuIHJlc29sdmUoX2RhdGFCYXNlKTtcclxuXHRcdFx0XHJcblx0XHRcdF9maXJzdExvYWRQYWdlID0gZmFsc2U7XHJcblx0XHRcdHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihEQi5OQU1FLCBEQi5WRVJTSU9OKTtcclxuXHJcblx0XHRcdC8vIFNlIGNyZWEgZXN0cnVjdHVyYSBkZSBsYSBiYXNlIGRlIGRhdG9zXHJcblx0XHRcdHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gYXN5bmMgZSA9PiB7XHJcblx0XHRcdFx0X2ZpcnN0TG9hZFBhZ2UgPSB0cnVlO1xyXG5cdFx0XHRcdF9kYXRhQmFzZSA9IGUudGFyZ2V0LnJlc3VsdDtcclxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IF9kYXRhQmFzZS5jcmVhdGVPYmplY3RTdG9yZShEQi5UQUJMRSwgeyBrZXlQYXRoOiBEQi5LRVlQQVRIIH0pO1xyXG5cdFx0XHRcdG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KERCLlRBQkxFLCBEQi5LRVlQQVRIKTtcclxuXHRcdFx0XHRvYmplY3RTdG9yZS50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZSA9PiByZXNvbHZlKF9kYXRhQmFzZSk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRnZXRSZXF1ZXN0Q29tcGxldGUocmVxdWVzdCkudGhlbihlID0+IHJlc29sdmUoX2RhdGFCYXNlID0gZS50YXJnZXQucmVzdWx0KSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBGdW5jacOzbiBwYXJhIHZlcmlmaWNhciBkZWwgYXJjaGl2byBlbiBlbCBuYXZlZ2Fkb3JcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBQYXLDoW1ldHJvczpcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBkYXRhOiAgICBJbmZvcm1hY2nDs24gZGVsIGFyY2hpdm8gYSB2ZXJmaWNhclxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFJldG9ybmE6ICAgICB7Ym9vbH0uXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZm5Jc1VwZGF0ZUZpbGUoZGF0YSkge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0aWYgKF9maWxlc0NsaWVudCkge1xyXG5cdFx0XHRcdHJldHVybiByZXNvbHZlKHVwZGF0ZUZpbGUoZGF0YSkpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRnZXREQigpLnRoZW4oZGF0YWJhc2UgPT4ge1xyXG5cdFx0XHRcdGlmKEZJTEVTVE9VUERBVEUgPT0gZGF0YS5zcmMgJiYgX2ZpcnN0TG9hZFBhZ2UpIHJldHVybiByZXNvbHZlKGZhbHNlKTtcclxuXHJcblx0XHRcdFx0bGV0IHJlc3F1ZXN0ID0gZGF0YWJhc2UudHJhbnNhY3Rpb24oREIuVEFCTEUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKERCLlRBQkxFKS5nZXRBbGwoKTtcclxuXHRcdFx0XHRyZXR1cm4gZ2V0UmVxdWVzdENvbXBsZXRlKHJlc3F1ZXN0KS50aGVuKHJlcXVlc3QgPT4ge1xyXG5cdFx0XHRcdFx0X2ZpbGVzQ2xpZW50ID0ge307XHJcblx0XHRcdFx0XHRyZXNxdWVzdC5yZXN1bHQuZm9yRWFjaChyZWNvcmQgPT4gX2ZpbGVzQ2xpZW50W3JlY29yZFtEQi5LRVlQQVRIXV0gPSByZWNvcmQuZGF0ZSk7XHJcblx0XHRcdFx0XHRyZXNvbHZlKHVwZGF0ZUZpbGUoZGF0YSkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUZpbGUoX2RhdGEpIHtcclxuXHRcdFx0bGV0IGluZm9TYXZlZCA9IF9maWxlc0NsaWVudFtfZGF0YS5uYW1lXSxcclxuXHRcdFx0XHRpc1VwZGF0ZWQgPSBpbmZvU2F2ZWQgJiYgIWlzTmFOKF9kYXRhLmRhdGUpID8gaW5mb1NhdmVkLnZhbHVlT2YoKSA+PSBfZGF0YS5kYXRlIDogdHJ1ZTtcclxuXHRcdFx0cmV0dXJuIGlzVXBkYXRlZDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gRnVuY2nDs24gcGFyYSB2ZXJpZmljYXIgZGVsIGFyY2hpdm8gZW4gZWwgbmF2ZWdhZG9yXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3M6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gZGF0YTogICAgSW5mb3JtYWNpw7NuIGRlbCBhcmNoaXZvIGEgdmVyZmljYXJcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBSZXRvcm5hOiAgICAge2Jvb2x9LlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQqL1xyXG5cdGZ1bmN0aW9uIGZuU2F2ZVJlc3BvbnNlREIoZGF0YSkge1xyXG5cdFx0cmV0dXJuIGdldERCKCkudGhlbihkYXRhYmFzZSA9PiB7XHJcblx0XHRcdGxldCByZXNxdWVzdCA9IGRhdGFiYXNlLnRyYW5zYWN0aW9uKERCLlRBQkxFLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoREIuVEFCTEUpLnB1dCh7IFxyXG5cdFx0XHRcdG5hbWU6IGRhdGEubmFtZSwgZGF0ZTogZGF0YS5kYXRlIFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBnZXRSZXF1ZXN0Q29tcGxldGUocmVzcXVlc3QpLnRoZW4ocmVxdWVzdCA9PiB7XHJcblx0XHRcdFx0X2ZpbGVzQ2xpZW50W2RhdGFbREIuS0VZUEFUSF1dID0gZGF0YS5kYXRlO1xyXG5cdFx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBGdW5jacOzbiBwYXJhIG9idGVuZXIgZWwgYm9keSBkZSBsYSByZXNwdWVzdGEgZGVsIHNlcnZpZG9yXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3M6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gZGF0YTogICAgICAgIEluZm9ybWFjacOzbiBkZSBsYSBwZXRpY2nDs24gcmVhbGl6YWRhXHJcblx0XHQvLyByZXNwb25zZTogICAgUmVzcHVlc3RhIGRlbCBzZXJ2aWRvclxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFJldHVybjsgICAgICBQcm9taXNlXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gZm5HZXRSZXN1bHQoZGF0YSwgcmVzcG9uc2UpIHtcclxuXHRcdGlmKGRhdGEuZnJvbUZldGNoKSB7XHJcblx0XHRcdGRhdGEucmVzcG9uc2UgPSByZXNwb25zZTtcclxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShkYXRhKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzcG9uc2VbZGF0YS5tZXRob2RCb2R5XSgpLnRoZW4ocmVzdWx0ID0+IHtcclxuXHRcdFx0ZGF0YS5yZXN1bHQgPSByZXN1bHQ7XHJcblx0XHRcdGlmKHJlc3VsdCBpbnN0YW5jZW9mIEJsb2IgJiYgIXJlc3VsdC50eXBlKSBkYXRhLnJlc3VsdCA9IHJlc3VsdC5zbGljZShyZXN1bHQsIHJlc3VsdC5zaXplLCBkYXRhLm1pbWUpO1xyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBQYXLDoW1ldHJvczpcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBAZGF0YToge29iamVjdH0gSW5mb3JtYWNpw7NuIGRlIGxhIHBldGljacOzbiBhIHJlYWxpemFyLlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIEZ1bmNpw7NuIHBhcmEgb2J0ZW5lciBlbCBhcmNoaXZvIG8gbGEgcGV0aWNpw7NuIHNvbGljaXRhZGEsIGN1YW5kbyBlbCBhcmNoaXZvIGV4aXN0ZSDDqXN0ZSBzZSBsZWUgZGVsIG5hdmVnYWRvciBcclxuXHRcdC8vIHkgc2UgcmV0b3JuYSBsYSB1cmwgZGVsIGJsb2IgbyBlbCBjb250ZW5pZG8gZGVsIMOpc3RlIGRlcGVuZGllbmRvIGRlbCB0aXBvIGRlIGFyY2hpdm8gKG1pbWUpLCBzaSBzZSBwcmVzZW50YSBcclxuXHRcdC8vIHVuIGVycm9yIGFsIGxlZXIgZWwgYXJjaGl2byBkZWwgbmF2ZWdhZG9yLCBzZSBoYWNlIGxhIHBldGljacOzbiBhbCBzZXJ2aWRvci5cclxuXHRcdC8vXHJcblx0XHQvLyBDdWFuZG8gZWwgc2Vydmlkb3IgcmVzcG9uZGEgbGEgcGV0aWNpw7NuIGNvbiBPSyBzZSBndWFyZGFyw6EgbGEgcmVzcHVlc3RhIGVuIGVsIG5hdmVnYWRvciBzaSBhc8OtIHNlIGNvbmZpZ3VyYVxyXG5cdFx0Ly8gZW4gZWwgcGFyw6FtZXRybyBkZSBsYSBmdW5jacOzbiBkZSBpbmljaW8gQGNhY2hlLlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQqL1xyXG5cdGZ1bmN0aW9uIGZuR2V0U2F2ZWRGaWxlKGRhdGEpIHtcclxuXHRcdC8vIFNlIG9idGllbmUgZWwgYXJjaGl2byBkZXNkZSBlbCBuYXZlZ2Fkb3JcclxuXHRcdHJldHVybiBfY3VycmVudENhY2hlLm1hdGNoKGRhdGEuc3JjVG9SZXF1ZXN0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cdFx0XHRyZXR1cm4gIXJlc3BvbnNlID8gZm5TZW5kUmVxdWVzdChkYXRhKSA6IGZuR2V0UmVzdWx0KGRhdGEsIHJlc3BvbnNlKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvKlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFNlIGd1YXJkYSBsYSByZXNwdWVzdGEgZGVsIHNlcnZpZG9yIGVuIGxhIGNhY2hlXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3M6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gQGRhdGE6ICAgICAgIHtvYmplY3R9ICAgIEluZm9ybWFjacOzbiBkZSBsYSBwZXRpY2nDs24gYSByZWFsaXphci5cclxuXHRcdC8vIEByZXBvbnNlOiAgICB7cmVzcG9uc2V9ICBSZXNwdWVzdGEgZGVsIHNlcnZpZG9yLlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQqL1xyXG5cdGZ1bmN0aW9uIGZuU2F2ZUZpbGUoZGF0YSwgcmVzcG9uc2UpIHtcclxuXHRcdGRhdGEuZGF0ZSA9IG5ldyBEYXRlKCk7XHJcblx0XHRfY3VycmVudENhY2hlLnB1dChyZXNwb25zZS51cmwsIHJlc3BvbnNlLmNsb25lKCkpO1xyXG5cdFx0cmV0dXJuIGZuR2V0UmVzdWx0KGRhdGEsIHJlc3BvbnNlKTtcclxuXHR9XHJcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQvLyBQdWJsaWMgQVBJXHJcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHR0aGlzLmZhY3RvcnlFcnJvciA9IGZuSGFuZGxlRXJyb3I7XHJcblx0dGhpcy5nZXRGaWxlID0gZm5HZXRGaWxlO1xyXG5cdHRoaXMuc2VuZFJlcXVlc3QgPSBmblNlbmRSZXF1ZXN0O1xyXG5cdHRoaXMuc2F2ZVJlc3BvbnNlREIgPSBmblNhdmVSZXNwb25zZURCO1xyXG5cdHRoaXMuZ2V0UmVzdWx0ID0gZm5HZXRSZXN1bHQ7XHJcblxyXG5cdC8vIEV4cG9ydCBjb25zdGFudHNcclxuXHR0aGlzLmNvbnN0YW50cyA9IHtcclxuXHRcdEhFQURFUl9KUjogSEVBREVSX0pSLFxyXG5cdFx0Q0FDSEVfVkVSU0lPTjogQ0FDSEVfVkVSU0lPTixcclxuXHRcdEZJTEVTVE9VUERBVEU6IEZJTEVTVE9VUERBVEUsXHJcblx0XHRGSUxFU19TRVJWRVI6IHt9XHJcblx0fTtcclxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG59KS5jYWxsKHNlbGYudG9vbHMpOyJdLCJmaWxlIjoiYXNzZXRzL2pzL3dvcmtlcnMvcmVxdWVzdGVyLXRvb2xzLmpzIn0=
