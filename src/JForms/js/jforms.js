(function(){function a(){function a(a){if(a)for(var b=0;b<a.length;b++)a[b].textContent=""}this.reset(),this.removeAttribute("data-state");var b=this.querySelector(".form.validated");b&&b.classList.remove("validated"),a(this.querySelectorAll("span[data-bind]")),a(this.querySelectorAll("output[data-bind]"));var c=this.querySelectorAll("[data-disabled]");if(c)for(var d=0;d<c.length;d++)c[d].setAttribute("disabled","disabled");var e=this.querySelectorAll("[data-not-disabled]");if(e)for(var d=0;d<e.length;d++)e[d].removeAttribute("disabled","disabled");var f=this.querySelectorAll("[data-id]");if(f)for(var d=0;d<f.length;d++)delete f[d].dataset.id;var g=this.querySelectorAll("[data-fade]");if(g)for(var d=0;d<g.length;d++)g[d].classList.add("fade");var h=this.querySelectorAll("[type=\"hidden\"]:not([data-block])");[].slice.call(h,function(a){a.value=""});var j=this.querySelector("button[data-accion]");j&&j.removeAttribute("data-accion")}function b(){if(!this.checkValidity()){for(var a,b,c=this.querySelectorAll(".form"),d=0;d<c.length;d++)b=c[d].querySelector(":invalid"),a=a||b,b&&!c[d].classList.contains("active")&&f.apply(c[d].querySelector("header h4")),c[d].classList.add("validated");return a&&a.focus(),!1}return!0}function c(){for(var a=this,b=a.querySelectorAll("[data-no-disabled]"),c=0;c<b.length;c++)b[c].setAttribute("data-no-disabled","active"),b[c].setAttribute("disabled","")}function d(a){var b,c=this,d=c.querySelectorAll("[data-bind]");if(0!=d.length){b={};for(var e=0;e<d.length;e++)"input"==d[e].tagName.toLowerCase()?"radio"==d[e].type.toLowerCase()?d[e].checked&&(b[d[e].dataset.bind]=d[e].value):"checkbox"==d[e].type.toLowerCase()?b[d[e].dataset.bind]=!!d[e].checked:"file"==d[e].type.toLowerCase()?b[d[e].dataset.bind]=d[e].file:b[d[e].dataset.bind]=d[e].value:b[d[e].dataset.bind]=d[e].value;if(a){var f=[];for(var e in b)f.push(b[e]);return f}return b}}function e(b){var c=this;for(var d in b){var f=c.querySelectorAll("[data-bind=\""+d+"\"]");if(f[0])if("radio"==f[0].getAttribute("type")){var g;[].slice.call(f).filter(function(a){a.value.toString()==b[d].toString()&&(g=a)}),g&&(g.checked=!0)}else if("checkbox"==f[0].getAttribute("type"))for(var h=0;h<f.length;h++)for(var i=0;i<b[d].length;i++)f[h].value==b[d][i]&&(f[h].checked=!0);else if("file"==f[0].getAttribute("type"))continue;else if(f[0].fnGet){var j=f[0].bind,k=f[0].db.length?f[0].db:[f[0].db],l=k.fnFind(function(a){return a[j.id]==b[d]});f[0].value=l[j.text],f[0].dataset.id=b[d]}else f[0].value=b[d]}}function f(a,b,c){a=a||this;var d=a.parentNode.parentNode;c&&(d=a);var f=d.querySelector("fieldset ul"),g=d.querySelector("h4");c||(d.classList.contains("active")&&!b?d.classList.remove("active"):!d.classList.contains("active")&&(d.classList.add("active"),d.setAttribute("data-active",""),setTimeout(function(){d.removeAttribute("data-active")},500)));var h=d.classList.contains("active");f.style.marginTop=h?"0px":"-"+(f.offsetHeight+g.offsetHeight)+"px"}this.form=function(g){g.clean=a,g.isValid=b,g.setNoDisabled=c,g.set=e,g.get=d,f(g,!1,!1),g.querySelector("h4").addEventListener("click",function(){f(this)},!1),g.querySelector("ul").addEventListener("click",function(){f(this,!0)},!1)},this.showForm=f,this.initButtons=function(a){a&&!a.length&&(a=[a]);for(var b=a||document.querySelectorAll("a.button, button.button"),c=0;c<b.length;c++)b[c].addEventListener("click",function(a){a.preventDefault();var b,c,e,f,g=$(this);b=g.find(".circle"),b.height()||b.width()||(c=Math.max(g.outerWidth(),g.outerHeight()),b.css({height:c,width:c})),e=a.pageX-g.offset().left-b.width()/2,f=a.pageY-g.offset().top-b.height()/2,b.css({top:f+"px",left:e+"px"}),b.addClass("animate"),setTimeout(function(){b.removeClass("animate")},700)},!1)},this.isDate=this.isDate||new RegExp(/(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2})/),this.isNull=this.isNull||/^null$/,this.isTrue=this.isTrue||/^true$/,this.isFalse=this.isFalse||/^false$/,this.isZero=this.isZero||/^0$/,this.isHour=this.isHour||new RegExp(/^(0[1-9]|1\d|2[0-3]):([0-5]\d):([0-5]\d)$/)}).apply(jr.addNS("jforms"));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpmb3Jtcy5qcyJdLCJuYW1lcyI6WyJmbkNsZWFuIiwiZm5DbGVhblRleHQiLCJvYmplY3RzIiwiaSIsImxlbmd0aCIsInRleHRDb250ZW50IiwicmVzZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JtIiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkaXNhYmxlZHMiLCJzZXRBdHRyaWJ1dGUiLCJub3REaXNhYmxlZHMiLCJ0eXBlYWhlYWQiLCJkYXRhc2V0IiwiaWQiLCJmYWRlIiwiYWRkIiwiaGlkZGVucyIsInNsaWNlIiwiY2FsbCIsImlucHV0IiwidmFsdWUiLCJidXR0b25TYXZlIiwiZm5Jc1ZhbGlkIiwiY2hlY2tWYWxpZGl0eSIsImlucHV0T2ZGb3JtIiwiZm9ybXMiLCJjb250YWlucyIsImZuU2hvd0Zvcm0iLCJhcHBseSIsImZvY3VzIiwiZm5TZXROb0Rpc2FibGVkIiwiY3R4IiwiY29udHJvbHMiLCJmbkdldCIsImluQXJyYXkiLCJlbnRpZGFkIiwiY29udHJvbGVzIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwidHlwZSIsImNoZWNrZWQiLCJiaW5kIiwiZmlsZSIsInBhcmFtZXRyb3MiLCJwdXNoIiwiZm5TZXQiLCJpdGVtIiwiY29udHJvbCIsImdldEF0dHJpYnV0ZSIsInJhZGlvIiwiZmlsdGVyIiwiZSIsInRvU3RyaW5nIiwiYSIsImRiIiwiZm5GaW5kIiwidGV4dCIsImNsaWNrT25mb3JtIiwicmVzaXplIiwiYXJ0IiwicGFyZW50Tm9kZSIsInVsIiwiaGVhZCIsInNldFRpbWVvdXQiLCJhY3RpdmVkIiwic3R5bGUiLCJtYXJnaW5Ub3AiLCJvZmZzZXRIZWlnaHQiLCJjbGVhbiIsImlzVmFsaWQiLCJzZXROb0Rpc2FibGVkIiwic2V0IiwiZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dGb3JtIiwiaW5pdEJ1dHRvbnMiLCJib3RvbmVzIiwiYnV0dG9ucyIsImRvY3VtZW50IiwicHJldmVudERlZmF1bHQiLCJjaXJjbGUiLCJkIiwieCIsInkiLCIkdGhpcyIsIiQiLCJmaW5kIiwiaGVpZ2h0Iiwid2lkdGgiLCJNYXRoIiwibWF4Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiY3NzIiwicGFnZVgiLCJvZmZzZXQiLCJsZWZ0IiwicGFnZVkiLCJ0b3AiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaXNEYXRlIiwiUmVnRXhwIiwiaXNOdWxsIiwiaXNUcnVlIiwiaXNGYWxzZSIsImlzWmVybyIsImlzSG91ciIsImpyIiwiYWRkTlMiXSwibWFwcGluZ3MiOiJBQUdBLENBQUMsVUFBWSxDQWtDVCxRQUFTQSxDQUFBQSxDQUFULEVBQW1CLENBMkJmLFFBQVNDLENBQUFBLENBQVQsQ0FBcUJDLENBQXJCLENBQThCLENBQzFCLEdBQUtBLENBQUwsQ0FDQSxJQUFLLEdBQUlDLENBQUFBLENBQUMsQ0FBRyxDQUFiLENBQWdCQSxDQUFDLENBQUdELENBQU8sQ0FBQ0UsTUFBNUIsQ0FBb0NELENBQUMsRUFBckMsQ0FDSUQsQ0FBTyxDQUFDQyxDQUFELENBQVAsQ0FBV0UsV0FBWCxDQUF5QixFQUNoQyxDQTlCRCxLQUFLQyxLQUFMLEVBRGUsQ0FHZixLQUFLQyxlQUFMLENBQXFCLFlBQXJCLENBSGUsQ0FLZixHQUFJQyxDQUFBQSxDQUFJLENBQUcsS0FBS0MsYUFBTCxDQUFtQixpQkFBbkIsQ0FBWCxDQUNJRCxDQU5XLEVBTUxBLENBQUksQ0FBQ0UsU0FBTCxDQUFlQyxNQUFmLENBQXNCLFdBQXRCLENBTkssQ0FRZlYsQ0FBVyxDQUFDLEtBQUtXLGdCQUFMLENBQXNCLGlCQUF0QixDQUFELENBUkksQ0FTZlgsQ0FBVyxDQUFDLEtBQUtXLGdCQUFMLENBQXNCLG1CQUF0QixDQUFELENBVEksQ0FXZixHQUFJQyxDQUFBQSxDQUFTLENBQUcsS0FBS0QsZ0JBQUwsQ0FBc0IsaUJBQXRCLENBQWhCLENBRUEsR0FBSUMsQ0FBSixDQUNJLElBQUssR0FBSVYsQ0FBQUEsQ0FBQyxDQUFHLENB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clZILENBcVZTZ0YsRUFBRSxDQUFDQyxLQUFILENBQVMsUUFBVCxDQXJWVCxDIiwic291cmNlc0NvbnRlbnQiOlsiLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gQ29tbW9uIFRvb2xzLCBOYW1lc3BhY2UgTWFpblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgLypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBGdW5jacOzbiBwYXJhIGFncmVnYXIgbG9zIGRpZmVyZW50ZXMgZXZlbnRvcyBkZWwgQVBJIGZvcm1zXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gUGFyw6FtZXRyb3NcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBmb3JtOiAgICBFbGVtZW50byBmb3JtIGFsIHF1ZSBzZSBsZSB2YW4gYSBhZ3JlZ2FyIGxhcyBmdW5jaW9uZXNcclxuXHRcdC8vICAgICAgICAgIGRlIHZhbGlkYWNpw7NuIHkgZGUgbGltcGlhci4gIHs8Zm9ybSAvPn1cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuICAgIGZ1bmN0aW9uIGZuRm9ybShmb3JtKSB7XHJcbiAgICAgICAgZm9ybS5jbGVhbiA9IGZuQ2xlYW47XHJcbiAgICAgICAgZm9ybS5pc1ZhbGlkID0gZm5Jc1ZhbGlkO1xyXG4gICAgICAgIGZvcm0uc2V0Tm9EaXNhYmxlZCA9IGZuU2V0Tm9EaXNhYmxlZDtcclxuICAgICAgICBmb3JtLnNldCA9IGZuU2V0O1xyXG4gICAgICAgIGZvcm0uZ2V0ID0gZm5HZXQ7XHJcbiAgICAgICAgLy8gQWRkIGEgY2xhc3MgZm9yIHRoYXQgdGhlIHRvb2x0aXBzIGFyZSB2aXNpYmlsaXR5XHJcbiAgICAgICAgLy8gZm9ybS5hZGRFdmVudExpc3RlbmVyKCdpbnZhbGlkJywgZm5Gb3JtSW52YWxpZCwgZmFsc2UpO1xyXG4gICAgICAgIC8vIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmbkZvcm1JbnZhbGlkLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8vIFNlIGFncmVnYSBmdW5jaW9uYWxpZGFkIGRlIGFjb3JkaW9uIGEgbG9zIGZvcm11bGFyaW9zXHJcbiAgICAgICAgZm5TaG93Rm9ybShmb3JtLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignaDQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsgZm5TaG93Rm9ybSh0aGlzKTsgfSwgZmFsc2UpO1xyXG4gICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcigndWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsgZm5TaG93Rm9ybSh0aGlzLCB0cnVlKTsgfSwgZmFsc2UpO1xyXG4gICAgfSAvLyBlbmQgZnVuY3Rpb25cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8qXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gRnVuY2nDs24gcGFyYSBsaW1waWFyIGxvcyBmb3JtdWxhcmlvc1xyXG5cdFx0Ly8gY3R4KHRoaXMpOiAgIEVsZW1lbnRvIGZvcm11bGFyaW8gICAgIHs8Zm9ybSAvPn1cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuICAgIGZ1bmN0aW9uIGZuQ2xlYW4oKSB7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIC8vIFNlIGVsaW1pbmEgZWwgZXN0YWRvIGRlbCBmb3JtdWxhcmlvXHJcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXN0YXRlXCIpO1xyXG4gICAgICAgIC8vIFNpIGVsIGZvcm11bGFyaW8gc2UgYSB2YWxpZGFkbyBzZSBxdWl0YSBlc3RhIHJlZmVyZW5jaWFcclxuICAgICAgICB2YXIgZm9ybSA9IHRoaXMucXVlcnlTZWxlY3RvcignLmZvcm0udmFsaWRhdGVkJyk7XHJcbiAgICAgICAgaWYgKGZvcm0pIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgndmFsaWRhdGVkJyk7XHJcbiAgICAgICAgLy8gU2UgY2FwdHVyYW4gdG9kb3MgbG9zIGRhdG9zIGRlIHNvbG8gbGVjdHVyYVxyXG4gICAgICAgIGZuQ2xlYW5UZXh0KHRoaXMucXVlcnlTZWxlY3RvckFsbCgnc3BhbltkYXRhLWJpbmRdJykpO1xyXG4gICAgICAgIGZuQ2xlYW5UZXh0KHRoaXMucXVlcnlTZWxlY3RvckFsbCgnb3V0cHV0W2RhdGEtYmluZF0nKSk7XHJcbiAgICAgICAgLy8gU2Ugb2J0aWVuZSB0b2RvcyBsb3MgY29udHJvbGVzIHF1ZSBkZWJlIGRlc2FiaWxpdGFyc2VuXHJcbiAgICAgICAgdmFyIGRpc2FibGVkcyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZGlzYWJsZWRdJyk7XHJcbiAgICAgICAgLy8gU2UgYWdyZWdhbiBlbCBhdHJpYnV0byBkaWFibGVkXHJcbiAgICAgICAgaWYgKGRpc2FibGVkcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc2FibGVkcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkc1tpXS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfSAvLyBlbmQgaWZcclxuXHJcbiAgICAgICAgLy8gU2Ugb2J0aWVuZSB0b2RvcyBsb3MgY29udHJvbGVzIHF1ZSBkZWJlbiBoYWJpbGl0YXJzZW4gdW5hIHZleiBzZVxyXG4gICAgICAgIC8vIGhhZ2EgY2xpY2sgZW4gZWwgYm90w7NuIGRlIGNhbmNlbGFyIG8gZ3VhcmRhclxyXG4gICAgICAgIHZhciBub3REaXNhYmxlZHMgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW5vdC1kaXNhYmxlZF0nKTtcclxuICAgICAgICBpZiAobm90RGlzYWJsZWRzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm90RGlzYWJsZWRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbm90RGlzYWJsZWRzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICB9IC8vIGVuZCBpZlxyXG5cclxuICAgICAgICAvLyBGdW5jacOzbiBwYXJhIGxpbXBpYXIgbG9zIGNvbnRyb2xlc1xyXG4gICAgICAgIGZ1bmN0aW9uIGZuQ2xlYW5UZXh0KG9iamVjdHMpIHtcclxuICAgICAgICAgICAgaWYgKCFvYmplY3RzKSByZXR1cm47XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqZWN0cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIG9iamVjdHNbaV0udGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICB9IC8vIGVuZCBmdWN0aW9uXHJcblxyXG4gICAgICAgIC8vIFNlIGxpbWlwYW4gbG9zIGNvbnRyb2xlcyBkZWwgdHlwZWFoZWFkXHJcbiAgICAgICAgdmFyIHR5cGVhaGVhZCA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWRdJyk7XHJcbiAgICAgICAgaWYgKHR5cGVhaGVhZCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVhaGVhZC5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0eXBlYWhlYWRbaV0uZGF0YXNldC5pZDtcclxuICAgICAgICB9IC8vIGVuZCBpZlxyXG5cclxuICAgICAgICAvLyBTZSBvY3VsdGFuIGxvcyBjb250cm9sZXMgY29uIGVsIGF0cmlidXRvIGRhdGEtZmFkZVxyXG4gICAgICAgIHZhciBmYWRlID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1mYWRlXScpO1xyXG4gICAgICAgIGlmIChmYWRlKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmFkZS5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGZhZGVbaV0uY2xhc3NMaXN0LmFkZCgnZmFkZScpO1xyXG4gICAgICAgIH0gLy8gZW5kIGlmXHJcblxyXG4gICAgICAgIC8vIFNlIGxpbXBpYW4gdG9kb3MgbG9zIGNvbnRyb2xlcyBoaWRkZW5cclxuICAgICAgICB2YXIgaGlkZGVucyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnW3R5cGU9XCJoaWRkZW5cIl06bm90KFtkYXRhLWJsb2NrXSknKTtcclxuICAgICAgICBbXS5zbGljZS5jYWxsKGhpZGRlbnMsIGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTZSBlbGltaW5hIGxhIGFjY2nDs24gZGVsIGJvdMOzbiBndWFyZGFyXHJcbiAgICAgICAgdmFyIGJ1dHRvblNhdmUgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjY2lvbl0nKTtcclxuICAgICAgICBpZiAoYnV0dG9uU2F2ZSkgYnV0dG9uU2F2ZS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtYWNjaW9uJyk7XHJcbiAgICB9IC8vIGVuZCBmdW5jdGlvblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBGdW5jacOzbiB2YWxpZGFyIHNpIGVzIGNvcnJlY3RvIG8gbm8gZWwgZm9ybXVsYXJpbyB5IHBhcmEgYWdyZWdhciBsYSBcclxuXHRcdC8vIGNsYXNlIHF1ZSBpbmRpY2EgcXVlIGVsIGZvcm11bGFyaW8gZXMgaW52YWxpZG8uXHJcblx0XHQvLyBkZW50cm8gZGUgbGEgdGFnIEZvcm0sIGRlYmUgZXhpc3RpciB1biBlbGVtZW50byBjb24gbGEgY2xhc2UgLmZvcm0gXHJcblx0XHQvLyBjdHgodGhpcyk6ICAgRWxlbWVudG8gZm9ybXVsYXJpbyAgICAgezxmb3JtIC8+fVxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQqL1xyXG4gICAgZnVuY3Rpb24gZm5Jc1ZhbGlkKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgLy8gU2Ugb2J0aWVuZW4gbGFzIHNlY2Npb25lcyB5IHNlIHZlcmZpY2FuXHJcbiAgICAgICAgICAgIHZhciBmb3JtcyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0nKTtcclxuICAgICAgICAgICAgdmFyIGlucHV0O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTZSBvYnRpZW5lIGVsIHByaW1lciBjb250cm9sIGludmFsaWRvIHBhcmEgeSBlamVjdXRhciBsYSBmdW5jacOzbiBmb2N1cygpXHJcbiAgICAgICAgICAgICAgICAvLyBhbCBmaW5hbGl6YXIgZWwgY2ljbG8sIHNlIG9idGllbmUgZWwgcHJpbWVyIGNvbnRyb2wgaW52YWxpZG8gcG9yIHNpIGxhIFxyXG4gICAgICAgICAgICAgICAgLy8gc2VjY2nDs24gZXN0YSBvY3VsdGEgc2UgbXVlc3RyYSwgKHNvbG8gcGFyYSBtb3N0cmFyIGxhcyBzZWNjaW9uZXMgcXVlIHRpZW5lbiBcclxuICAgICAgICAgICAgICAgIC8vIGNvbnRyb2xlcyBpbnZhbGlkb3MpXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRPZkZvcm0gPSBmb3Jtc1tpXS5xdWVyeVNlbGVjdG9yKCc6aW52YWxpZCcpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQgPSBpbnB1dCB8fCBpbnB1dE9mRm9ybTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dE9mRm9ybSAmJiAhZm9ybXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlIGV4cGFuZGUgZWwgY29udHJvbCBkZWwgZm9ybXVsYXJpbyBwb3Igc2kgZXN0YSBjb250cmFpZG9cclxuICAgICAgICAgICAgICAgICAgICBmblNob3dGb3JtLmFwcGx5KGZvcm1zW2ldLnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciBoNCcpKTtcclxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIGlmXHJcbiAgICAgICAgICAgICAgICBmb3Jtc1tpXS5jbGFzc0xpc3QuYWRkKFwidmFsaWRhdGVkXCIpO1xyXG4gICAgICAgICAgICB9IC8vIGVuZCBmb3JcclxuICAgICAgICAgICAgaWYgKGlucHV0KSBpbnB1dC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gLy8gZW5kIGNoZWNrdmFsaWRpdHlcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gLy8gZW5kIGZ1bmN0aW9uXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvKlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIEZ1bmNpw7NuIGRlc2FiaWxpdGFyIGNvbnRyb2xlcyBjb24gbWFyY2EgW2RhdGEtbm8tZGlzYWJsZWRdXHJcblx0XHQvLyBjdHg6IEZvcm11bGFyaW9cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuICAgIGZ1bmN0aW9uIGZuU2V0Tm9EaXNhYmxlZCgpIHtcclxuICAgICAgICB2YXIgY3R4ID0gdGhpcztcclxuICAgICAgICB2YXIgY29udHJvbHMgPSBjdHgucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbm8tZGlzYWJsZWRdJyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb250cm9scy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb250cm9sc1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbm8tZGlzYWJsZWQnLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xzW2ldLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XHJcbiAgICAgICAgfSAvLyBlbmQgZm9yXHJcbiAgICB9IC8vIGVuZCBmdW5jdGlvblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBGdW5jacOzbiBwYXJhIHRvbWFyIGxvcyB2YWxvcmVzIGRlbCBmb3JtdWxhcmlvXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gY3R4OiBGb3JtdWxhcmlvXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcbiAgICBmdW5jdGlvbiBmbkdldChpbkFycmF5KSB7XHJcbiAgICAgICAgdmFyIGN0eCA9IHRoaXMsIGVudGlkYWQ7XHJcblxyXG4gICAgICAgIC8vIFNlIG9idGllbmVuIGxvcyBjb250cm9sZXMgcGFyYSB0b21hciBsb3MgdmFsb3Jlc1xyXG4gICAgICAgIHZhciBjb250cm9sZXMgPSBjdHgucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYmluZF0nKTtcclxuICAgICAgICBpZiAoY29udHJvbGVzLmxlbmd0aCA9PSAwKSByZXR1cm47XHJcbiAgICAgICAgLy8gU2UgY3JlYSB1bmEgaW5zc3RhY2lhXHJcbiAgICAgICAgZW50aWRhZCA9IHt9O1xyXG5cclxuICAgICAgICAvLyBTZSBjcmVhIGVsIG9iamV0b1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udHJvbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChjb250cm9sZXNbaV0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdpbnB1dCcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb250cm9sZXNbaV0udHlwZS50b0xvd2VyQ2FzZSgpID09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbGVzW2ldLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aWRhZFtjb250cm9sZXNbaV0uZGF0YXNldC5iaW5kXSA9IGNvbnRyb2xlc1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IC8vIGVuZCBpZiByYWRpb1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb250cm9sZXNbaV0udHlwZS50b0xvd2VyQ2FzZSgpID09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpZGFkW2NvbnRyb2xlc1tpXS5kYXRhc2V0LmJpbmRdID0gY29udHJvbGVzW2ldLmNoZWNrZWQgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRyb2xlc1tpXS50eXBlLnRvTG93ZXJDYXNlKCkgPT0gJ2ZpbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aWRhZFtjb250cm9sZXNbaV0uZGF0YXNldC5iaW5kXSA9IGNvbnRyb2xlc1tpXS5maWxlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpZGFkW2NvbnRyb2xlc1tpXS5kYXRhc2V0LmJpbmRdID0gY29udHJvbGVzW2ldLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSAvLyBlbmQgZWxzZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZW50aWRhZFtjb250cm9sZXNbaV0uZGF0YXNldC5iaW5kXSA9IGNvbnRyb2xlc1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgfSAvLyBlbmQgaWZcclxuICAgICAgICB9IC8vIGVuZCBmb3JcclxuXHJcbiAgICAgICAgaWYgKGluQXJyYXkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmFtZXRyb3MgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBlbnRpZGFkKSBwYXJhbWV0cm9zLnB1c2goZW50aWRhZFtpXSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJhbWV0cm9zO1xyXG4gICAgICAgIH0gLy8gZW5kIGlmXHJcblxyXG4gICAgICAgIHJldHVybiBlbnRpZGFkO1xyXG4gICAgfSAvLyBlbmQgZnVuY3Rpb25cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8qXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gRnVuY2nDs24gcGFyYSBhZ3JlZ2FyIHZhbG9yZXMgYSBsb3MgY29udHJvbGVzIGRlIGxvcyBcclxuXHRcdC8vIGZvcm11bGFyaW9zXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gY3R4OiBGb3JtdWxhcmlvXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcbiAgICBmdW5jdGlvbiBmblNldChpdGVtKSB7XHJcbiAgICAgICAgdmFyIGN0eCA9IHRoaXM7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgaW4gaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbCA9IGN0eC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1iaW5kPVwiJyArIGkgKyAnXCJdJyk7XHJcbiAgICAgICAgICAgIGlmIChjb250cm9sWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbFswXS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwoY29udHJvbCkuZmlsdGVyKGZ1bmN0aW9uIChlKSB7IGlmIChlLnZhbHVlLnRvU3RyaW5nKCkgPT0gaXRlbVtpXS50b1N0cmluZygpKSByYWRpbyA9IGU7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYWRpbykgcmFkaW8uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBpZlxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udHJvbFswXS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBjb250cm9sLmxlbmd0aDsgZSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgaXRlbVtpXS5sZW5ndGg7IGErKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sW2VdLnZhbHVlID09IGl0ZW1baV1bYV0pIGNvbnRyb2xbZV0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBlbmQgZm9yICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSAvLyBlbmQgaWZcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRyb2xbMF0uZ2V0QXR0cmlidXRlKCd0eXBlJykgPT0gJ2ZpbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBlbHNlXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250cm9sWzBdLmZuR2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbmQgPSBjb250cm9sWzBdLmJpbmQsIGRiID0gY29udHJvbFswXS5kYi5sZW5ndGggPyBjb250cm9sWzBdLmRiIDogW2NvbnRyb2xbMF0uZGJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRiLmZuRmluZChmdW5jdGlvbiAoZSkgeyByZXR1cm4gZVtiaW5kLmlkXSA9PSBpdGVtW2ldIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xbMF0udmFsdWUgPSB2YWx1ZVtiaW5kLnRleHRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xbMF0uZGF0YXNldC5pZCA9IGl0ZW1baV07XHJcbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBlbHNlXHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sWzBdLnZhbHVlID0gaXRlbVtpXTtcclxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIGVsc2VcclxuICAgICAgICAgICAgfSAvLyBlbmQgZnVuY3Rpb25cclxuICAgICAgICB9IC8vIGVuZCBmb3JcclxuICAgIH0gLy8gZW5kIGZ1bmN0aW9uXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvKlxyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIEZ1bmNpw7NuIHBhcmEgZGFyIHVuIGVmZWN0byBkZSBjbGljayBlbiBsb3MgYm90b25lc1xyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFBhcsOhbWV0cm9zXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gYm90b25lczogVGFncyAoZWxlbWVudG9zKSBxdWUgZGViZW4gaW5pY2lhcnNlIGNvbiBlbCBlZmVjdG9cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ki9cclxuICAgIGZ1bmN0aW9uIGZuSW5pdEJ1dHRvbnMoYm90b25lcykge1xyXG4gICAgICAgIGlmIChib3RvbmVzICYmICFib3RvbmVzLmxlbmd0aCkgYm90b25lcyA9IFtib3RvbmVzXTtcclxuICAgICAgICB2YXIgYnV0dG9ucyA9IGJvdG9uZXMgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYS5idXR0b24sIGJ1dHRvbi5idXR0b24nKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBidXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaXJjbGUsIGQsIHgsIHksICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIGNpcmNsZSA9ICR0aGlzLmZpbmQoJy5jaXJjbGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNpcmNsZS5oZWlnaHQoKSAmJiAhY2lyY2xlLndpZHRoKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkID0gTWF0aC5tYXgoJHRoaXMub3V0ZXJXaWR0aCgpLCAkdGhpcy5vdXRlckhlaWdodCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBjaXJjbGUuY3NzKHsgaGVpZ2h0OiBkLCB3aWR0aDogZCB9KTtcclxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIGlmXHJcblxyXG4gICAgICAgICAgICAgICAgeCA9IGUucGFnZVggLSAkdGhpcy5vZmZzZXQoKS5sZWZ0IC0gY2lyY2xlLndpZHRoKCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgeSA9IGUucGFnZVkgLSAkdGhpcy5vZmZzZXQoKS50b3AgLSBjaXJjbGUuaGVpZ2h0KCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgIGNpcmNsZS5jc3MoeyB0b3A6IHkgKyAncHgnLCBsZWZ0OiB4ICsgJ3B4JyB9KTtcclxuICAgICAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNpcmNsZS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpOyB9LCA3MDApO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7IC8vIGVuZCBjbGlja1xyXG5cclxuICAgICAgICB9IC8vIGVuZCBmb3JcclxuICAgIH0gLy8gZW5kIGZ1bmN0aW9uIFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0LypcclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQvLyBGdW5jacOzbiBwYXJhIG1vc3RyYXIgbG9zIGZvcm11bGFyaW9zIGN1YW5kbyBzb2xvIHNlIG11ZXN0cmEgZWwgdMOtdHVsb1xyXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdC8vIFBhcmFtZXRlcnM6XHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0Ly8gZTogICAgICAgICAgIEV2ZW50byBkZSBjbGljIHNvYnJlIGVsIHTDrXR1bG8gZGUgZm9ybXVsYXJpbyAoaDQpIHkgc3UgY3VlcnBvICh1bCkuXHJcblx0XHQvLyBjbGlja09uZm9ybTogRWxlbWVudG8gZW4gZWwgcXVlIHNlIGhhY2UgY2xpYyAoY3R4KS5cclxuXHRcdC8vIHJlc2l6ZTogICAgICBDdWFuZG8gc2UgZGEgY2xpYyBlbiBlbCBjdWVycG8gZGVsIGZvcm11bGFyaW8gKHVsKSwgw6lzdGUgcGFyw6FtZXRybyBlc3RhcsOhIGVuIHRydWUuXHJcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCovXHJcbiAgICBmdW5jdGlvbiBmblNob3dGb3JtKGUsIGNsaWNrT25mb3JtLCByZXNpemUpIHtcclxuICAgICAgICBlID0gZSB8fCB0aGlzO1xyXG4gICAgICAgIHZhciBhcnQgPSBlLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcclxuICAgICAgICBpZiAocmVzaXplKSBhcnQgPSBlO1xyXG4gICAgICAgIHZhciB1bCA9IGFydC5xdWVyeVNlbGVjdG9yKCdmaWVsZHNldCB1bCcpO1xyXG4gICAgICAgIHZhciBoZWFkID0gYXJ0LnF1ZXJ5U2VsZWN0b3IoJ2g0Jyk7XHJcblxyXG4gICAgICAgIGlmICghcmVzaXplKSB7XHJcbiAgICAgICAgICAgIGlmIChhcnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpICYmICFjbGlja09uZm9ybSlcclxuICAgICAgICAgICAgICAgIGFydC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghYXJ0LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFydC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFydC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGFydC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtYWN0aXZlJyk7IH0sIDUwMCk7XHJcbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBpZiBhY3R2aWVcclxuICAgICAgICAgICAgfSAvLyBlbmQgYWN0aXZlXHJcbiAgICAgICAgfSAvLyBlbmQgcmVzaXplXHJcblxyXG4gICAgICAgIHZhciBhY3RpdmVkID0gYXJ0LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB1bC5zdHlsZS5tYXJnaW5Ub3AgPSBhY3RpdmVkID8gJzBweCcgOiAnLScgKyAodWwub2Zmc2V0SGVpZ2h0ICsgaGVhZC5vZmZzZXRIZWlnaHQpICsgJ3B4JztcclxuICAgIH0gLy8gZW5kIGZ1bmN0aW9uXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvKlxyXG5cdFx0IC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQgLy8gRnVuY2nDsyBxdWUgdmFsaWRhIGxhIHJlc3B1ZXN0YSBkZWwgc2Vydmlkb3IsIHkgcXVlIG5vdGlmaWNhIGFsIHVzdWFyaW9cclxuXHRcdCAvLyBkZSBsYSBhY2Npw7NuIHF1ZSBzZSBsbGV2byBhIGNhYm9cclxuXHRcdCAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0IC8vIFBhcsOhbWV0cm9zOlxyXG5cdFx0IC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQgLy8gcmVxdWV0czogICAgIEVsZW1lbnRvIHJldG9yYW5vIHBvciBlbCBzZXJ2aWRvclxyXG5cdFx0IC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHQgLy8gcmV0dXJuOiAgICAgIFNpIGVsIGVzYWRvIGRlIGxhIHJlc3B1ZXN0YSBlcyBjb3JyZWN0YVxyXG5cdFx0IC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICovXHJcbiAgICBmdW5jdGlvbiBmblZhbGlkYXRlUmVxdWVzdChyZXF1ZXN0LCBub3RpZmljYXRpb24sIHR5cGUpIHtcclxuICAgICAgICBpZiAocmVxdWVzdC5Fc3RhZG8gJiYgbm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIGZuTm90aWZpY2F0aW9uKHsgdGV4dDogcmVxdWVzdC5NZW5zYWplLCB0eXBlOiB0eXBlIHx8ICdzdWNjZXNzJyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSAvLyBlbmQgaWZcclxuICAgICAgICBlbHNlIGlmICghcmVxdWVzdC5Fc3RhZG8pIHtcclxuICAgICAgICAgICAgLy8gZm5Ob3RpZmljYXRpb24oeyB0ZXh0OiByZXF1ZXN0Lk1lbnNhamUsIHR5cGU6IHR5cGUgfHwgJ2Vycm9yJyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gLy8gZW5kIGlmXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IC8vIGVuZCBmdW5jdGlvblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gUHVibGljIEFQSSBtZXRob2RzXHJcbiAgICAvLyBGb3Jtc1xyXG4gICAgdGhpcy5mb3JtID0gZm5Gb3JtO1xyXG4gICAgdGhpcy5zaG93Rm9ybSA9IGZuU2hvd0Zvcm07XHJcbiAgICB0aGlzLmluaXRCdXR0b25zID0gZm5Jbml0QnV0dG9ucztcclxuICAgIC8vIEV4cHJlc2lvbmVzIHJlZ3VsYXJlc1xyXG4gICAgdGhpcy5pc0RhdGUgPSB0aGlzLmlzRGF0ZSB8fCBuZXcgUmVnRXhwKC8oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KVQoXFxkezJ9KVxcOihcXGR7Mn0pXFw6KFxcZHsyfSkvKTtcclxuICAgIHRoaXMuaXNOdWxsID0gdGhpcy5pc051bGwgfHwgbmV3IFJlZ0V4cCgnXm51bGwkJyk7XHJcbiAgICB0aGlzLmlzVHJ1ZSA9IHRoaXMuaXNUcnVlIHx8IG5ldyBSZWdFeHAoJ150cnVlJCcpO1xyXG4gICAgdGhpcy5pc0ZhbHNlID0gdGhpcy5pc0ZhbHNlIHx8IG5ldyBSZWdFeHAoJ15mYWxzZSQnKTtcclxuICAgIHRoaXMuaXNaZXJvID0gdGhpcy5pc1plcm8gfHwgbmV3IFJlZ0V4cCgnXjAkJyk7XHJcbiAgICB0aGlzLmlzSG91ciA9IHRoaXMuaXNIb3VyIHx8IG5ldyBSZWdFeHAoL14oMFsxLTldfDFcXGR8MlswLTNdKTooWzAtNV1cXGQpOihbMC01XVxcZCkkLyk7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICBcclxufSkuYXBwbHkoanIuYWRkTlMoXCJqZm9ybXNcIikpO1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSJdLCJmaWxlIjoiYXNzZXRzL2pzL2NvbnRyb2xzL2pmb3Jtcy5qcyJ9
