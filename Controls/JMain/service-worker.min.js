self.Promise||self.importScripts("https://www.promisejs.org/polyfills/promise-6.1.0.js"),self.Request||self.importScripts("assets/js/polyfills/fetch.js"),self.tools||self.importScripts("assets/js/workers/worker-tools.js");var ajax={};(function(){function e(e){var t=caches.open(c).then(function(e){return e.addAll(l)}).catch(function(e){self.tools.ajax.error(new Error(e).stack)});e.waitUntil(t)}function t(e){var t=caches.keys().then(function(e){return Promise.all(e.map(function(t,n){if(t!==c)return caches.delete(e[n])}))}).catch(function(e){self.tools.ajax.error(new Error(e).stack)});e.waitUntil(t)}function n(e){var t=caches.match(e.request).then(function(t){return t?t:r(e)}).catch(function(e){self.tools.ajax.error(new Error(e).stack)});e.respondWith(t)}function r(e){var t=e.request.clone();return fetch(t).then(function(t){if(!t||200!==t.status||"basic"!==t.type)return t;var n=t.clone();return caches.open(c).then(function(t){t.put(e.request,n)}),t}).catch(function(e){self.tools.ajax.error(new Error(e).stack)})}function s(e){var t=caches.open(c).then(function(t){return e.data.save=o,e.data.getFile=a,self.tools.ajax.get(e.data).then(function(t){return e.ports[0].postMessage(t)})}).catch(function(e){self.tools.ajax.error(new Error(e).stack)});e.waitUntil(t)}function a(e){try{return e.cache?(e.update=!0,Promise.resolve().then(function(){return caches.match(new Request(e.src)).then(function(t){return t?t.blob().then(function(n){var r=n.slice(0,i),s=n.slice(i,n.size,e.mime);return new Response(s).blob().then(function(n){return e.blob=n,t.headers.jdate=JSON.parse((new FileReaderSync).readAsText(r)),t})}):t}).catch(self.tools.ajax.error)}).then(function(t){return"controller-jmain.js"==e.name&&(self.data=e,self.respuesta=t),t?e.file&&e.file.jdate>t.headers.jdate?self.tools.ajax.send(e):(e.update=!1,new Promise(function(t,n){try{t(self.tools.ajax.getObject(e))}catch(e){n(e)}})):self.tools.ajax.send(e)}).catch(function(e){self.tools.ajax.error((new Error).stack)})):self.tools.ajax.send(e)}catch(t){return self.tools.ajax.error(new Error(t).stack),self.tools.ajax.send(e)}}function o(e,t){var n,r=t.clone();return n=e.file&&e.file.jdate?e.file.jdate:self.tools.ajax.getBlobDate(),caches.open(c).then(function(e){return r.blob().then(function(t){var s=new Response(new Blob([n,t]));return e.put(r.url,s).then(function(){return t})})}).catch(function(e){self.tools.ajax.error(new Error(e).stack)})}var c="app-v1",l=[],i=i||self.tools.ajax.getBlobDate().size;this.install=e,this.activate=t,this.fetch=n,this.message=s}).call(ajax),self.addEventListener("install",ajax.install),self.addEventListener("activate",ajax.activate),self.addEventListener("message",ajax.message);