self.requestFileSystemSync=self.webkitRequestFileSystemSync||self.requestFileSystemSync;var ajax={};(function(){function a(a){console.log("Error: "+a.message)}function b(a){this.created||(requestFileSystemSync?i=requestFileSystemSync(TEMPORARY,n):a.cache=!1,o=a.src.split("/"),o=o[o.length-1],l=location.href.substring(0,location.href.indexOf("assets")),h(a,{cache:!0,file:void 0,isText:"json"==a.mime||"text"==a.mime,method:"GET",mime:"js",text:void 0,update:!1}),k=r[a.mime],a.file=a.files.fnFind(function(a){return o==a.name}),m=a,this.created=!0)}function c(){try{if(!m.cache)return void d(m);var b=i.root.getFile(o,p),c=b.file();if(m.file&&new s(m.file.date)>c.lastModifiedDate)return m.update=!0,void d(m);e(c)}catch(f){f.toString().indexOf("NotFoundError")>-1?(m.cache&&(m.update=!0),d(m)):a(f)}}function d(b){this.xhr||(this.xhr=new XMLHttpRequest),this.xhr.open(b.method,l+b.src,!0),this.xhr.responseType="arraybuffer",b.value&&(this.xhr.responseType=""),this.xhr.setRequestHeader("Content-Type",k),this.xhr.setRequestHeader("Cache-Control","max-age=0"),this.xhr.setRequestHeader("Pragma","No-cache"),this.xhr.setRequestHeader("Pragma","Cache-Control: no-cache"),this.xhr.onreadystatechange=function(b){if(4==this.readyState)if(200==this.status){j=new Blob([new Uint8Array(this.response)],{type:k});try{e(j)}catch(b){a(b)}}else postMessage({result:"Error: "+b.srcElement.responseText})},b.value?this.xhr.send(JSON.stringify(b.value)):this.xhr.send(),this.xhr.addEventListener("error",a,!1)}function e(a){if(m.isText){var b=new FileReaderSync;m.text=b.readAsText(a),m.text="json"==m.mime&&m.text.length?JSON.parse(m.text):m.text}f(),postMessage({src:g(a),result:m.text,action:"read",update:m.update})}function f(){if(m.update){var a=i.root.getFile(o,q);a.remove(),a=i.root.getFile(o,q);var b=a.createWriter();b.write(j)}}function g(a){return URL.createObjectURL(a)}function h(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=void 0!==arguments[0][b]?arguments[0][b]:arguments[a][b]);return arguments[0]}var i,j,k,l,m,n=10485760,o=[],p={create:!1},q={create:!0},r={blob:"application/octet-stream",css:'text/css; charset="utf-8"',img:"image/jpeg",js:'text/javascript; charset="utf-8"',json:'application/json; charset="utf-8"',text:'text/plain; charset="utf-8"'},s=function(a){var b=a.split("-");return new Date(b[0],b[1],b[2],b[3])};this.fnInit=b,this.fnGetFile=c,this.fnSaveFile=f,this.created=!1}).apply(ajax),self.addEventListener("message",function(a){ajax.fnInit(a.data),ajax.fnGetFile()}),Array.prototype.fnFind||Object.defineProperty(Array.prototype,"fnFind",{enumerable:!1,configurable:!0,writable:!0,value:function(a,b){if(null==this)throw new TypeError("Array.prototype.fnFind called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var c,d=Object(this),e=d.length>>>0,f=arguments[1],g=[],h=0;e>h;h++)if(h in d&&(c=d[h],a.call(f,c,h,d))){if(!b)return c;g.push(c)}return b?g:void 0}});