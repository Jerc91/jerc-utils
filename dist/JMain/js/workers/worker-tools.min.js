self.tools={},function(){function e(e){var n={};return n.name=e.src.split("/"),n.name=n.name[n.name.length-1],r(n,e,{cache:!0,method:"GET",mime:n.mime||i(n.name)||"JS"}),n.mime=c[n.mime.toUpperCase()],n.isText=n.mime==c.JSON||n.mime==c.TEXT||n.mime==c.FORMQ,n.files&&n.files.fnFind&&(n.file=n.files.fnFind(function(e){return n.name==e.name}),n.file&&(n.file.jdate=Date.parse(n.file.date))),s||(s=location.href.substring(0,location.href.indexOf("assets")),s[s.length-1]==n.src[0]&&(n.src=n.src.substr(1,n.src.length-1))),l=e,n.getFile?n.getFile(n):t(n)}function t(e){var t=new Request(s+e.src,{method:e.method,cache:"no-cache",headers:new Headers({"Content-Type":e.mime}),body:JSON.stringify(e.value)});return fetch(t).then(function(t){if(!t.ok)throw new Error("Invalid HTTP response: "+t.status);return e.update?e.save(e,t):t.blob()}).then(function(t){return e.blob=t,n(e)}).catch(function(e){o(new Error(e).stack)})}function n(e){if(e.isText){var t=new FileReaderSync;e.text=t.readAsText(e.blob),e.text=e.mime!=c.TEXT&&e.text.length?JSON.parse(e.text):e.text}return{blob:e.blob,result:e.text,path:e.src}}function r(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=void 0!==arguments[0][t]?arguments[0][t]:arguments[e][t]);return arguments[0]}function i(e){var t,n;n=e.split("."),n=n[n.length-1].toLowerCase(),"jpg"==n||"png"==n?t=c.BLOB:"css"==n?t=c.CSS:"js"==n?t=c.JS:"json"==n?t=c.JSON:"txt"!=n&&"html"!=n||(t=c.TEXT);for(var r in c)if(c[r]==t)return r;return t}function o(e){console.log("Error: "+e,l.src)}function a(){return new Blob([Date.parse(new Date)])}var s,l,c={BLOB:"application/octet-stream",CSS:'text/css; charset="utf-8"',IMG:"image/jpeg",JS:'text/javascript; charset="utf-8"',JSON:'application/json; charset="utf-8"',TEXT:'text/plain; charset="utf-8"',FORMQ:"application/x-www-form-urlencoded",FORMDATA:"multipart/form-data"};this.mimes=c,this.get=e,this.getObject=n,this.send=t,this.error=o,this.getBlobDate=a}.call(tools.ajax||(tools.ajax={})),Array.prototype.fnFind||Object.defineProperty(Array.prototype,"fnFind",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.fnFind called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n,r=Object(this),i=r.length>>>0,o=arguments[1],a=[],s=0;s<i;s++)if(s in r&&(n=r[s],e.call(o,n,s,r))){if(!t)return n;a.push(n)}return t?a:void 0}});