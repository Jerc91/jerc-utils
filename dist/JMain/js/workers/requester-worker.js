self.requestFileSystemSync=self.webkitRequestFileSystemSync||self.requestFileSystemSync,self.importScripts('requester-tools.js'),self.requester={},function(){function a(){}let b={SIZEFILES:10485760,READ:{create:0},WRITE:{create:1}},c=null;this.getSavedFile=function(a){try{if(!c)return self.tools.sendRequest(a);let d=new Response(c.root.getFile(a.name,b.READ).file(),{status:200});return self.tools.getResult(a,d)}catch(b){if(-1<b.toString().includes('NotFoundError'))return self.tools.sendRequest(a);self.tools.error(b,a.name)}},this.saveFile=function(a,d){return d.clone().blob().then(function(e){let f,g=c.root.getFile(a.name,b.WRITE);return a.date=new Date,g.remove(),g=c.root.getFile(a.name,b.WRITE),f=g.createWriter(),f.write(e),self.tools.getResult(a,d)}).catch(self.tools.error)},this.removeAll=function(){var a=c.root.createReader(),b=a.readEntries();for(var d in b)b[d].remove()},this.initFileSystem=function(){self.requestFileSystemSync&&(c=c||self.requestFileSystemSync(TEMPORARY,b.SIZEFILES)),self.tools.factoryError(a)}}.apply(self.requester),self.addEventListener('message',function(a){let b=a.data;b.useFS&&(self.requester.initFileSystem(),b.saveFile=self.requester.saveFile,b.getSavedFile=self.requester.getSavedFile),self.tools.getFile(b).then((a)=>{self.postMessage(a)},(a)=>{self.postMessage(a)})});