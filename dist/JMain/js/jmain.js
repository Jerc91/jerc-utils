'use strict';(function(){function a(a){function b(a){var b=this===window?{}:this;a&&a.indexOf('.')&&a.split('.').forEach(function(a){b=b.addNS(a)})}return b.prototype.addNS=function(a,c){if(a)return a.match(window.validateNS)?('undefined'==typeof this[a]&&(c&&!c.hasOwnProperty('addNS')?(c.addNS=b.prototype.addNS,this[a]=c):this[a]=new b),this[a]):void 0},a?(a.hasOwnProperty('addNS')||(a.addNS=b.prototype.addNS),a):new b}function b(a,b){for(var c,d=window,e=a.split('.'),f=e.length,g=f-1,h=0;h<f;h++)c=d,d=d[e[h]];return b&&(c[e[g]]=null,delete c[e[g]]),d}function c(a){var b,c,d,e,f,g=a||location.search,h=g.indexOf('?');if(-1==g.indexOf('?'))return{};b=g.substr(h+1).split('&'),f=b.length,c={};for(var j=0;j<f;++j)d=b[j].substring(0,b[j].indexOf('=')),e=b[j].substring(b[j].indexOf('=')+1,b[j].length),c[d]=decodeURIComponent(e.replace(/\+/g,' '));return c}function d(){function a(){for(var c=arguments.length,d=0;d<c;d++)arguments[d]=arguments[d]instanceof Array?Promise.all(arguments[d].map((b)=>b instanceof Array?a(...b):a(b))):b(arguments[d]);return 1==c?arguments[0]:Promise.all(arguments)}function b(a){return a instanceof Promise?a:n.sendRequest(a)}var c=arguments.length,d=arguments;return new Promise(function(b,c){a(...d).then(function(){b(...arguments)},(a)=>{var b={error:a};return k(q)?void m(q,b):c(b)})})}function e(a,b,c){var d=a.result instanceof Blob&&'blob'!==b.mime,e={request:b,response:d?URL.createObjectURL(a.result):a.result},f=/^.*\.(css|js)([?#]{1}.*)?$/gi.exec(b.src);f?g({href:e.response,type:f[1],name:b.src,repeatTag:b.repeatTag,referenceTag:b.referenceTag}).then(function(){m(p,e),c()}):(m(p,e),c(e))}function f(a,b){return'string'==typeof a||a instanceof String?{src:a.toString()}:b?JSON.parse(JSON.stringify(a)):a}function g(a={}){return new Promise(function(b,d){var e,f,g,h;if(!a.repeatTag&&a.referenceTag){var i=('js'==a.type?'script':'link')+'[data-name="'+a.name+'"]';document.querySelector(i)&&b({})}switch(a.type){case'js':e=document.createElement('script'),e.src=a.href,e.async=!0;break;case'css':e=document.createElement('link'),e.href=a.href,e.rel='stylesheet',e.type='text/css';}a.referenceTag&&(g=a.name,h=g.indexOf('?'),-1<h&&(g=g.substring(0,h)),e.dataset.name=g),a.name&&(f=c(a.name),Object.keys(f).forEach((a)=>e.setAttribute(a,f[a]))),e.addEventListener('load',b,!1),e.addEventListener('error',d,!1),t.appendChild(e)})}function h(a,b){var c=(b||document).querySelector(a.request.query),d=c?c.firstElementChild:null;a.fragment&&(d?d.replaceWith(a.fragment):c.appendChild(a.fragment))}function i(){function a(a,c){return c.request.noAppend?b(c):(h(b(c),a),a)}function b(a){return Object.assign(a,{fragment:a.fragment||document.createRange().createContextualFragment(a.response)})}return get(...arguments).spread(function(){function b(a,d){let e,f=d.length;if(1<f){e=[];for(var g=0;g<f;g++)e[e.length]=b(a,d[g]);return e}return c(a,d)}function c(a,b){return a=d(a,b),b}function d(b,c){return b?a(b,c):b=a(document,c).fragment,b}var e,f=1<arguments.length?arguments:arguments[0];return b(e,f)})}function j(){function a(b){function c(a,b){var c='string'==typeof b.response;c?d[d.length]=b:Object.assign(a,b.response)}for(var d=[],e=jr.parametersWithoutFirst(...arguments)||[],f=e.length,g=0;g<f;g++)e[g]instanceof Array?e[g].forEach((c)=>{var e=a(b,c);e.length&&(d[d.length]=e)}):c(b,e[g]);return d}function b(a){var d=jr.parametersWithoutFirst(...arguments)||[],e=d.map((d)=>d instanceof Array?b(a,...d):c(a,d));return 1<d.length?Promise.all(e):e[0]}function c(a,b){return new Promise((c)=>{var d=new Worker('assets/js/workers/compiler-worker.js');d.addEventListener('message',(a)=>{d.terminate(),c(Object.assign(b,{response:a.data}))},!1),d.postMessage({template:b.response,data:a})})}return get(...arguments).spread(function(){var c={};return b(c,...a(c,...arguments))})}function k(a){return'[object Function]'==Object.prototype.toString.call(a)}function l(){var a,b=arguments.length;if(1<b){a=[];for(var c=1;c<b;c++)a[a.length]=arguments[c]}return a}function m(a){var b=l(...arguments);if(k(a))return b?a(...b):a(b)}var n,o,p,q,r='assets/config/filesToUpdate.json',s='dvContainerJGet',t=document.querySelector(`#${s}`)||document.createElement('div'),u=new a;window.jr=new a(function(a){var b={filesUpdatePath:r,getToWindow:!0};return Object.assign(b,a),jr.useFileSystem=b.useFS,jr.filesUpdatePath=b.filesUpdatePath||r,o=b.cbStartRequest,p=b.cbEndRequest,q=b.cbErrorRequest,b.getToWindow&&(window.get=d),d({src:jr.filesUpdatePath,cache:!1}).then(function(a){return jr.filesToUpdate=a.response,b.packages?(jr.service=u.serviceLocator,jr.service(b.packages)):Promise.resolve()},function(a){return a})}),Promise.prototype.spread||(Promise.prototype.spread=function(a){return this.then(function(b){return b instanceof Array?a(...b):a(b)})}),function(){function a(){function a(a){d.observador.notify(a.data.observedId,a).remove(a.data.observedId)}var d;return b.size<3&&(d=new Worker(jr.fileSystemWorkerPath),d.observador=u.observer.instance,d.addEventListener('message',a,!1),d.addEventListener('error',a,!1),b.set(b.size,d)),c>=b.size&&(c=0),d=b.get(c),c++,d}var b=new Map,c=0;this.sendRequest=function(b){var c=f(b,!0);return new Promise(function(d,f){var g,h;g=u.command.instance.on('message',e).on('error',f),h=a(),c.observedId=h.observador.add(function(a){g.trigger(a.type,a.data,b,d)}),m(o,c),h.postMessage(Object.assign({files:jr.filesToUpdate},c))}).then(function(a){return m(b.then,a),a},function(a){return c.error=a,m(b.catch,c),Promise.reject(c)})},this.init=function(){return Promise.resolve()}}.call(jr.addNS('fileSystem')),function(){function a(){return b?Promise.resolve(b):navigator.serviceWorker.getRegistration().then((a)=>b=a)}var b;this.sendRequest=function(b){var c=f(b,!0);return new Promise(function(b,d){a().then(function(a){var f=new MessageChannel;f.port1.onmessage=function(a){return'string'==typeof a.data?void d(a.data):void e(a.data,c,b)},m(o,c),a.active.postMessage(Object.assign({files:jr.filesToUpdate},c),[f.port2])})}).then(function(a){try{m(b.then,a)}catch(a){throw c.error=a,c}return a},function(a){return c.error=a,m(b.catch,c),Promise.reject(c)})},this.init=function(){return Promise.all([navigator.serviceWorker.register(jr.serviceWorkerPath,{scope:'./'}),navigator.serviceWorker.ready]).then(function(a){return jr.dev&&void 0,navigator.onLine?a[0].update():Promise.resolve()}).then(function(){navigator.serviceWorker.addEventListener('message',function(){})})}}.call(jr.addNS('serviceWorker')),Array.prototype.sortBy=function(a){for(var b,c=this.length;c;)b=this[--c],this[c]=[].concat(a.call(b,b,c),b);this.sort(function(c,a){for(var b=0,d=c.length;b<d;++b)if(c[b]!=a[b])return c[b]<a[b]?-1:1;return 0});for(var c=this.length;c;)this[--c]=this[c][this[c].length-1];return this},function(){window.addEventListener('beforeinstallprompt',function(a){a.userChoice.then(function(a){void 0,'dismissed'==a.outcome,void 0})})}(),function(){var a=this;(function(){function b(){var a={},b=this;return b.on=function(c,d){return a[c]=function(){return m(d,...arguments),b},b},b.off=function(c){return delete a[c],b},b.trigger=function(c){let d=l(...arguments)||[];return m(a[c],...d),b},b}Object.defineProperty(a,'command',{get:()=>new b})})(),function(){function b(){var a=new Map,b=this;return b.add=function(b){var d=new c(b);return a.set(d.id,d),d.id},b.remove=function(c){return a.delete(c),b},b.notify=function(c){return a.has(c)&&a.get(c).update(l(arguments)),b},b}function c(a){this.update=function(){return m(a,...arguments),this},this.id=++d}var d=0;Object.defineProperty(a,'observer',{get:()=>new b})}(),function(){function a(){function a(e){var f='string'==typeof e?e:e.name,j=h.get(f)||e;if(!j.paths)throw'Package does not have any path: '+e;return new Promise(function(e,k){var l,m;g.has(f)?l=Promise.resolve({response:g.get(f)}):(m=[],j.dependencies&&j.dependencies.forEach((b)=>{i.has(b)||(i.set(b,a(b)),m.push(i.get(b)))}),!i.has(j.name)&&i.set(j.name,Promise.all(m).then(()=>d(j.paths))),l=i.get(j.name)),l.then(function(a){var d=[];(h.has(f)?Promise.resolve():c([a.response])).then(function(){j=h.get(f),j.namespaces.forEach(function(a){d.push(b(a))}),g.set(f,d),e(d)})},k)})}function c(a){var b='string'==typeof a?d(a):Promise.resolve({response:a});return b.then(function(a){a.response instanceof Array||(a.response=[a.response]),a.response.forEach((a)=>{h.has(a.name)||h.set(a.name,{name:a.name,paths:a.paths,namespaces:a.namespaces,dependencies:a.dependencies})})})}function e(b){return'string'==typeof b?/.+(\.|\/).+/.test(b)?c(b):a(b):'object'==typeof b?c(b):b instanceof Array?c(b):void 0}var f=this,g=new Map,h=new Map,i=new Map;return e.remove=function(a){var c='string'==typeof a?a:a.name,d=h.get(c)||a;return d&&(d.namespaces&&d.namespaces.forEach((a)=>b(a,!0)),d.paths&&d.paths.forEach((a)=>{var b=document.querySelector(`[data-name="${a}"]`);b&&b.parentNode.removeChild(b)})),g.delete(a),i.delete(a),Promise.resolve()},e}Object.defineProperty(u,'serviceLocator',{get:()=>new a})}(),this.addNS('singleton',function(a,b){return a&&a.singletonInstance?a:k(b)?(a=b(),Object.defineProperty(a,{value:!0}),a.singletonInstance=!0,a):void 0})}.call(u),jr.isFunction=k,jr.parametersWithoutFirst=l,jr.execFunction=m,jr.errorHandler=function(){},jr.getQuerys=c,jr.insertAfter=function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},jr.deleteTag=function(a){a&&a.parentNode.removeChild(a)},jr.parseJsonDate=function(a){var b=6e4*new Date().getTimezoneOffset(),c=/\/Date\((-?\d+)([+-]\d{2})?(\d{2})?.*/.exec(a);return void 0==c[2]&&(c[2]=0),void 0==c[3]&&(c[3]=0),new Date(+c[1]+b+3.6e6*c[2]+6e4*c[3])},jr.now=function(){var a=new Date;return a.getFullYear()+'-'+(a.getMonth()+1)+'-'+(a.getDay()-1)+' '+a.getHours()+':'+a.getMinutes()},jr.namespace=a,jr.import=b,jr.replaceWith=h,jr.setHTML=i,jr.compileHTML=j,jr.compileSetHTML=function(){var a=j(...arguments);return 1<a.length?void i(...a):i(a)},jr.get=d,jr.tagScriptLink=g,jr.patterns=u,jr.validateNS=/^[a-zA-Z]?[a-zA-z0-9]+$/,jr.countTags=0,jr.filesToUpdate=[],jr.ssl=-1<location.origin.indexOf('https'),jr.dev='localhost'===location.hostname||'127.0.0.1'===location.hostname,jr.lang=document.querySelector('html').getAttribute('lang'),function(){var a=document.currentScript,b={useFS:!1,useSW:!0,workersCount:3};Object.assign(b,document.currentScript.dataset),jr.useServiceWorker=b.useSW,jr.fileSystemWorkerPath=b.fileSystemWorkerPath||'assets/js/workers/filesystem-worker.js',jr.serviceWorkerPath=b.serviceWorkerPath||'./service-worker.js',jr.useServiceWorker&&(n=jr.serviceWorker),jr.useFileSystem&&(n=jr.fileSystem,window.addEventListener('load',function(){window.applicationCache.addEventListener('updateready',function(){window.applicationCache.status==window.applicationCache.UPDATEREADY&&(window.applicationCache.swapCache(),window.location.reload())},!1)},!1)),n.init().then(function(){t.id||(t.id=s),g({href:a.dataset.init,type:'js'}),document.body.hasChildNodes(t)||document.body.appendChild(t)})}()})(window);